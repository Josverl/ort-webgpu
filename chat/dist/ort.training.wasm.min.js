/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var ort=(()=>{var yr=Object.defineProperty;var Ja=Object.getOwnPropertyDescriptor;var Xa=Object.getOwnPropertyNames;var Qa=Object.prototype.hasOwnProperty;var W=(n,r)=>()=>(n&&(r=n(n=0)),r);var ut=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),ft=(n,r)=>{for(var e in r)yr(n,e,{get:r[e],enumerable:!0})},Za=(n,r,e,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Xa(r))!Qa.call(n,a)&&a!==e&&yr(n,a,{get:()=>r[a],enumerable:!(u=Ja(r,a))||u.enumerable});return n};var qe=n=>Za(yr({},"__esModule",{value:!0}),n);var Wt,Je,lt,Ka,Gt,zt=W(()=>{"use strict";Wt=new Map,Je=[],lt=(n,r,e)=>{if(r&&typeof r.init=="function"&&typeof r.createInferenceSessionHandler=="function"){let u=Wt.get(n);if(u===void 0)Wt.set(n,{backend:r,priority:e});else{if(u.priority>e)return;if(u.priority===e&&u.backend!==r)throw new Error(`cannot register backend "${n}" using priority ${e}`)}if(e>=0){let a=Je.indexOf(n);a!==-1&&Je.splice(a,1);for(let d=0;d<Je.length;d++)if(Wt.get(Je[d]).priority<=e){Je.splice(d,0,n);return}Je.push(n)}return}throw new TypeError("not a valid backend")},Ka=async n=>{let r=Wt.get(n);if(!r)return"backend not found.";if(r.initialized)return r.backend;if(r.aborted)return r.error;{let e=!!r.initPromise;try{return e||(r.initPromise=r.backend.init(n)),await r.initPromise,r.initialized=!0,r.backend}catch(u){return e||(r.error=`${u}`,r.aborted=!0),r.error}finally{delete r.initPromise}}},Gt=async n=>{let r=n.executionProviders||[],e=r.map(m=>typeof m=="string"?m:m.name),u=e.length===0?Je:e,a,d=[],f=new Set;for(let m of u){let h=await Ka(m);typeof h=="string"?d.push({name:m,err:h}):(a||(a=h),a===h&&f.add(m))}if(!a)throw new Error(`no available backend found. ERR: ${d.map(m=>`[${m.name}] ${m.err}`).join(", ")}`);for(let{name:m,err:h}of d)e.includes(m)&&console.warn(`removing requested execution provider "${m}" from session options because it is not available: ${h}`);let o=r.filter(m=>f.has(typeof m=="string"?m:m.name));return[a,new Proxy(n,{get:(m,h)=>h==="executionProviders"?o:Reflect.get(m,h)})]}});var gn=W(()=>{"use strict";zt()});var yn,wn=W(()=>{"use strict";yn="1.18.0"});var bn,Fe,wr=W(()=>{"use strict";wn();bn="warning",Fe={wasm:{},webgl:{},webgpu:{},versions:{common:yn},set logLevel(n){if(n!==void 0){if(typeof n!="string"||["verbose","info","warning","error","fatal"].indexOf(n)===-1)throw new Error(`Unsupported logging level: ${n}`);bn=n}},get logLevel(){return bn}};Object.defineProperty(Fe,"logLevel",{enumerable:!0})});var $,On=W(()=>{"use strict";wr();$=Fe});var vn,_n,Tn=W(()=>{"use strict";vn=(n,r)=>{let e=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);e.width=n.dims[3],e.height=n.dims[2];let u=e.getContext("2d");if(u!=null){let a,d;r?.tensorLayout!==void 0&&r.tensorLayout==="NHWC"?(a=n.dims[2],d=n.dims[3]):(a=n.dims[3],d=n.dims[2]);let f=r?.format!==void 0?r.format:"RGB",o=r?.norm,m,h;o===void 0||o.mean===void 0?m=[255,255,255,255]:typeof o.mean=="number"?m=[o.mean,o.mean,o.mean,o.mean]:(m=[o.mean[0],o.mean[1],o.mean[2],0],o.mean[3]!==void 0&&(m[3]=o.mean[3])),o===void 0||o.bias===void 0?h=[0,0,0,0]:typeof o.bias=="number"?h=[o.bias,o.bias,o.bias,o.bias]:(h=[o.bias[0],o.bias[1],o.bias[2],0],o.bias[3]!==void 0&&(h[3]=o.bias[3]));let g=d*a,b=0,w=g,M=g*2,C=-1;f==="RGBA"?(b=0,w=g,M=g*2,C=g*3):f==="RGB"?(b=0,w=g,M=g*2):f==="RBG"&&(b=0,M=g,w=g*2);for(let S=0;S<d;S++)for(let E=0;E<a;E++){let F=(n.data[b++]-h[0])*m[0],L=(n.data[w++]-h[1])*m[1],k=(n.data[M++]-h[2])*m[2],z=C===-1?255:(n.data[C++]-h[3])*m[3];u.fillStyle="rgba("+F+","+L+","+k+","+z+")",u.fillRect(E,S,1,1)}if("toDataURL"in e)return e.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},_n=(n,r)=>{let e=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),u;if(e!=null){let a,d,f;r?.tensorLayout!==void 0&&r.tensorLayout==="NHWC"?(a=n.dims[2],d=n.dims[1],f=n.dims[3]):(a=n.dims[3],d=n.dims[2],f=n.dims[1]);let o=r!==void 0&&r.format!==void 0?r.format:"RGB",m=r?.norm,h,g;m===void 0||m.mean===void 0?h=[255,255,255,255]:typeof m.mean=="number"?h=[m.mean,m.mean,m.mean,m.mean]:(h=[m.mean[0],m.mean[1],m.mean[2],255],m.mean[3]!==void 0&&(h[3]=m.mean[3])),m===void 0||m.bias===void 0?g=[0,0,0,0]:typeof m.bias=="number"?g=[m.bias,m.bias,m.bias,m.bias]:(g=[m.bias[0],m.bias[1],m.bias[2],0],m.bias[3]!==void 0&&(g[3]=m.bias[3]));let b=d*a;if(r!==void 0&&(r.format!==void 0&&f===4&&r.format!=="RGBA"||f===3&&r.format!=="RGB"&&r.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let w=4,M=0,C=1,S=2,E=3,F=0,L=b,k=b*2,z=-1;o==="RGBA"?(F=0,L=b,k=b*2,z=b*3):o==="RGB"?(F=0,L=b,k=b*2):o==="RBG"&&(F=0,k=b,L=b*2),u=e.createImageData(a,d);for(let P=0;P<d*a;M+=w,C+=w,S+=w,E+=w,P++)u.data[M]=(n.data[F++]-g[0])*h[0],u.data[C]=(n.data[L++]-g[1])*h[1],u.data[S]=(n.data[k++]-g[2])*h[2],u.data[E]=z===-1?255:(n.data[z++]-g[3])*h[3]}else throw new Error("Can not access image data");return u}});var br,En,Sn,An,Mn,Rn=W(()=>{"use strict";jt();br=(n,r)=>{if(n===void 0)throw new Error("Image buffer must be defined");if(r.height===void 0||r.width===void 0)throw new Error("Image height and width must be defined");if(r.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:e,width:u}=r,a=r.norm??{mean:255,bias:0},d,f;typeof a.mean=="number"?d=[a.mean,a.mean,a.mean,a.mean]:d=[a.mean[0],a.mean[1],a.mean[2],a.mean[3]??255],typeof a.bias=="number"?f=[a.bias,a.bias,a.bias,a.bias]:f=[a.bias[0],a.bias[1],a.bias[2],a.bias[3]??0];let o=r.format!==void 0?r.format:"RGBA",m=r.tensorFormat!==void 0&&r.tensorFormat!==void 0?r.tensorFormat:"RGB",h=e*u,g=m==="RGBA"?new Float32Array(h*4):new Float32Array(h*3),b=4,w=0,M=1,C=2,S=3,E=0,F=h,L=h*2,k=-1;o==="RGB"&&(b=3,w=0,M=1,C=2,S=-1),m==="RGBA"?k=h*3:m==="RBG"?(E=0,L=h,F=h*2):m==="BGR"&&(L=0,F=h,E=h*2);for(let P=0;P<h;P++,w+=b,C+=b,M+=b,S+=b)g[E++]=(n[w]+f[0])/d[0],g[F++]=(n[M]+f[1])/d[1],g[L++]=(n[C]+f[2])/d[2],k!==-1&&S!==-1&&(g[k++]=(n[S]+f[3])/d[3]);return m==="RGBA"?new me("float32",g,[1,4,e,u]):new me("float32",g,[1,3,e,u])},En=async(n,r)=>{let e=typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement,u=typeof ImageData<"u"&&n instanceof ImageData,a=typeof ImageBitmap<"u"&&n instanceof ImageBitmap,d=typeof n=="string",f,o=r??{},m=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},h=g=>g instanceof HTMLCanvasElement||g instanceof OffscreenCanvas?g.getContext("2d"):null;if(e){let g=m();g.width=n.width,g.height=n.height;let b=h(g);if(b!=null){let w=n.height,M=n.width;if(r!==void 0&&r.resizedHeight!==void 0&&r.resizedWidth!==void 0&&(w=r.resizedHeight,M=r.resizedWidth),r!==void 0){if(o=r,r.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");o.tensorFormat="RGBA",o.height=w,o.width=M}else o.tensorFormat="RGBA",o.height=w,o.width=M;b.drawImage(n,0,0),f=b.getImageData(0,0,M,w).data}else throw new Error("Can not access image data")}else if(u){let g,b;if(r!==void 0&&r.resizedWidth!==void 0&&r.resizedHeight!==void 0?(g=r.resizedHeight,b=r.resizedWidth):(g=n.height,b=n.width),r!==void 0&&(o=r),o.format="RGBA",o.height=g,o.width=b,r!==void 0){let w=m();w.width=b,w.height=g;let M=h(w);if(M!=null)M.putImageData(n,0,0),f=M.getImageData(0,0,b,g).data;else throw new Error("Can not access image data")}else f=n.data}else if(a){if(r===void 0)throw new Error("Please provide image config with format for Imagebitmap");let g=m();g.width=n.width,g.height=n.height;let b=h(g);if(b!=null){let w=n.height,M=n.width;return b.drawImage(n,0,0,M,w),f=b.getImageData(0,0,M,w).data,o.height=w,o.width=M,br(f,o)}else throw new Error("Can not access image data")}else{if(d)return new Promise((g,b)=>{let w=m(),M=h(w);if(!n||!M)return b();let C=new Image;C.crossOrigin="Anonymous",C.src=n,C.onload=()=>{w.width=C.width,w.height=C.height,M.drawImage(C,0,0,w.width,w.height);let S=M.getImageData(0,0,w.width,w.height);o.height=w.height,o.width=w.width,g(br(S.data,o))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(f!==void 0)return br(f,o);throw new Error("Input data provided is not supported - aborted tensor creation")},Sn=(n,r)=>{let{width:e,height:u,download:a,dispose:d}=r,f=[1,u,e,4];return new me({location:"texture",type:"float32",texture:n,dims:f,download:a,dispose:d})},An=(n,r)=>{let{dataType:e,dims:u,download:a,dispose:d}=r;return new me({location:"gpu-buffer",type:e??"float32",gpuBuffer:n,dims:u,download:a,dispose:d})},Mn=(n,r,e)=>new me({location:"cpu-pinned",type:n,data:r,dims:e??[r.length]})});var Xe,Mt,Cn,Pn,In=W(()=>{"use strict";Xe=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Mt=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Cn=!1,Pn=()=>{if(!Cn){Cn=!0;let n=typeof BigInt64Array<"u"&&BigInt64Array.from,r=typeof BigUint64Array<"u"&&BigUint64Array.from,e=typeof Float16Array<"u"&&Float16Array.from;n&&(Xe.set("int64",BigInt64Array),Mt.set(BigInt64Array,"int64")),r&&(Xe.set("uint64",BigUint64Array),Mt.set(BigUint64Array,"uint64")),e?(Xe.set("float16",Float16Array),Mt.set(Float16Array,"float16")):Xe.set("float16",Uint16Array)}}});var xn,Dn,Un=W(()=>{"use strict";jt();xn=n=>{let r=1;for(let e=0;e<n.length;e++){let u=n[e];if(typeof u!="number"||!Number.isSafeInteger(u))throw new TypeError(`dims[${e}] must be an integer, got: ${u}`);if(u<0)throw new RangeError(`dims[${e}] must be a non-negative integer, got: ${u}`);r*=u}return r},Dn=(n,r)=>{switch(n.location){case"cpu":return new me(n.type,n.data,r);case"cpu-pinned":return new me({location:"cpu-pinned",data:n.data,type:n.type,dims:r});case"texture":return new me({location:"texture",texture:n.texture,type:n.type,dims:r});case"gpu-buffer":return new me({location:"gpu-buffer",gpuBuffer:n.gpuBuffer,type:n.type,dims:r});default:throw new Error(`tensorReshape: tensor location ${n.location} is not supported`)}}});var me,jt=W(()=>{"use strict";Tn();Rn();In();Un();me=class{constructor(r,e,u){Pn();let a,d;if(typeof r=="object"&&"location"in r)switch(this.dataLocation=r.location,a=r.type,d=r.dims,r.location){case"cpu-pinned":{let o=Xe.get(a);if(!o)throw new TypeError(`unsupported type "${a}" to create tensor from pinned buffer`);if(!(r.data instanceof o))throw new TypeError(`buffer should be of type ${o.name}`);this.cpuData=r.data;break}case"texture":{if(a!=="float32")throw new TypeError(`unsupported type "${a}" to create tensor from texture`);this.gpuTextureData=r.texture,this.downloader=r.download,this.disposer=r.dispose;break}case"gpu-buffer":{if(a!=="float32"&&a!=="float16"&&a!=="int32"&&a!=="int64"&&a!=="uint32"&&a!=="uint8"&&a!=="bool")throw new TypeError(`unsupported type "${a}" to create tensor from gpu buffer`);this.gpuBufferData=r.gpuBuffer,this.downloader=r.download,this.disposer=r.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o,m;if(typeof r=="string")if(a=r,m=u,r==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");o=e}else{let h=Xe.get(r);if(h===void 0)throw new TypeError(`Unsupported tensor type: ${r}.`);if(Array.isArray(e)){if(r==="float16"&&h===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");r==="uint64"||r==="int64"?o=h.from(e,BigInt):o=h.from(e)}else if(e instanceof h)o=e;else throw new TypeError(`A ${a} tensor's data must be type of ${h}`)}else if(m=e,Array.isArray(r)){if(r.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let h=typeof r[0];if(h==="string")a="string",o=r;else if(h==="boolean")a="bool",o=Uint8Array.from(r);else throw new TypeError(`Invalid element type of data array: ${h}.`)}else{let h=Mt.get(r.constructor);if(h===void 0)throw new TypeError(`Unsupported type for tensor data: ${r.constructor}.`);a=h,o=r}if(m===void 0)m=[o.length];else if(!Array.isArray(m))throw new TypeError("A tensor's dims must be a number array");d=m,this.cpuData=o,this.dataLocation="cpu"}let f=xn(d);if(this.cpuData&&f!==this.cpuData.length)throw new Error(`Tensor's size(${f}) does not match data length(${this.cpuData.length}).`);this.type=a,this.dims=d,this.size=f}static async fromImage(r,e){return En(r,e)}static fromTexture(r,e){return Sn(r,e)}static fromGpuBuffer(r,e){return An(r,e)}static fromPinnedBuffer(r,e,u){return Mn(r,e,u)}toDataURL(r){return vn(this,r)}toImageData(r){return _n(this,r)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(r){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,r&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(r){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return Dn(this,r)}}});var le,$t=W(()=>{"use strict";jt();le=me});var Fn,Bn,He,We,Or=W(()=>{"use strict";wr();Fn=(n,r)=>{},Bn=(n,r)=>{},He=n=>{(typeof Fe.trace>"u"?!Fe.wasm.trace:!Fe.trace)||Bn("BEGIN",n)},We=n=>{(typeof Fe.trace>"u"?!Fe.wasm.trace:!Fe.trace)||Bn("END",n)}});var Yt,kn=W(()=>{"use strict";zt();$t();Or();Yt=class n{constructor(r){this.handler=r}async run(r,e,u){He();let a={},d={};if(typeof r!="object"||r===null||r instanceof le||Array.isArray(r))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let f=!0;if(typeof e=="object"){if(e===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(e instanceof le)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(e)){if(e.length===0)throw new TypeError("'fetches' cannot be an empty array.");f=!1;for(let h of e){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);a[h]=null}if(typeof u=="object"&&u!==null)d=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,g=Object.getOwnPropertyNames(e);for(let b of this.outputNames)if(g.indexOf(b)!==-1){let w=e[b];(w===null||w instanceof le)&&(h=!0,f=!1,a[b]=w)}if(h){if(typeof u=="object"&&u!==null)d=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else d=e}}else if(typeof e<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of this.inputNames)if(typeof r[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if(f)for(let h of this.outputNames)a[h]=null;let o=await this.handler.run(r,a,d),m={};for(let h in o)if(Object.hasOwnProperty.call(o,h)){let g=o[h];g instanceof le?m[h]=g:m[h]=new le(g.type,g.data,g.dims)}return We(),m}async release(){return this.handler.dispose()}static async create(r,e,u,a){He();let d,f={};if(typeof r=="string"){if(d=r,typeof e=="object"&&e!==null)f=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(r instanceof Uint8Array){if(d=r,typeof e=="object"&&e!==null)f=e;else if(typeof e<"u")throw new TypeError("'options' must be an object.")}else if(r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer){let g=r,b=0,w=r.byteLength;if(typeof e=="object"&&e!==null)f=e;else if(typeof e=="number"){if(b=e,!Number.isSafeInteger(b))throw new RangeError("'byteOffset' must be an integer.");if(b<0||b>=g.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${g.byteLength}).`);if(w=r.byteLength-b,typeof u=="number"){if(w=u,!Number.isSafeInteger(w))throw new RangeError("'byteLength' must be an integer.");if(w<=0||b+w>g.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${g.byteLength-b}].`);if(typeof a=="object"&&a!==null)f=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(typeof u<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof e<"u")throw new TypeError("'options' must be an object.");d=new Uint8Array(g,b,w)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[o,m]=await Gt(f),h=await o.createInferenceSessionHandler(d,m);return We(),new n(h)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Ln,Nn=W(()=>{"use strict";kn();Ln=Yt});var Hn=W(()=>{"use strict"});var Wn=W(()=>{"use strict"});var Gn=W(()=>{"use strict"});var zn=W(()=>{"use strict"});var eo,Vt,jn=W(()=>{"use strict";zt();$t();eo="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Vt=class n{constructor(r,e,u){this.handler=r,this.hasOptimizerModel=e,this.hasEvalModel=u}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(r,e){let u=r.evalModel||"",a=r.optimizerModel||"",d=e||{},[f,o]=await Gt(d);if(f.createTrainingSessionHandler){let m=await f.createTrainingSessionHandler(r.checkpointState,r.trainModel,u,a,o);return new n(m,!!r.optimizerModel,!!r.evalModel)}else throw new Error(eo)}typeNarrowingForRunStep(r,e,u,a,d){let f={},o={};if(typeof u!="object"||u===null||u instanceof le||Array.isArray(u))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let m=!0;if(typeof a=="object"){if(a===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(a instanceof le)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(a)){if(a.length===0)throw new TypeError("'fetches' cannot be an empty array.");m=!1;for(let h of a){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(e.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);f[h]=null}if(typeof d=="object"&&d!==null)o=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,g=Object.getOwnPropertyNames(a);for(let b of e)if(g.indexOf(b)!==-1){let w=a[b];(w===null||w instanceof le)&&(h=!0,m=!1,f[b]=w)}if(h){if(typeof d=="object"&&d!==null)o=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else o=a}}else if(typeof a<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of r)if(typeof u[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if(m)for(let h of e)f[h]=null;return[f,o]}convertHandlerReturnTypeToMapOfTensors(r){let e={};for(let u in r)if(Object.hasOwnProperty.call(r,u)){let a=r[u];a instanceof le?e[u]=a:e[u]=new le(a.type,a.data,a.dims)}return e}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(r,e,u){let[a,d]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,r,e,u),f=await this.handler.runTrainStep(r,a,d);return this.convertHandlerReturnTypeToMapOfTensors(f)}async runOptimizerStep(r){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(r||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(r,e,u){if(this.hasEvalModel){let[a,d]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,r,e,u),f=await this.handler.runEvalStep(r,a,d);return this.convertHandlerReturnTypeToMapOfTensors(f)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(r=!0){return this.handler.getParametersSize(r)}async loadParametersBuffer(r,e=!0){let u=await this.getParametersSize(e);if(r.length!==4*u)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(r,e)}async getContiguousParameters(r=!0){return this.handler.getContiguousParameters(r)}async release(){return this.handler.dispose()}}});var $n,Yn=W(()=>{"use strict";jn();$n=Vt});var vr={};ft(vr,{InferenceSession:()=>Ln,TRACE:()=>Fn,TRACE_FUNC_BEGIN:()=>He,TRACE_FUNC_END:()=>We,Tensor:()=>le,TrainingSession:()=>$n,env:()=>$,registerBackend:()=>lt});var Qe=W(()=>{"use strict";gn();On();Nn();$t();Hn();Wn();Or();Gn();zn();Yn()});var _r={};ft(_r,{createReadStream:()=>qn,readFile:()=>to,readFileSync:()=>ro});var to,ro,qn,Tr=W(()=>{to=void 0,ro=void 0,qn=void 0});var Er={};ft(Er,{join:()=>no});var no,Sr=W(()=>{no=void 0});var Qn=ut((Xn,Ar)=>{"use strict";var Jn=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(r={}){var e=r,u,a;e.ready=new Promise((i,c)=>{u=i,a=c});var d=Object.assign({},e),f="./this.program",o=typeof window=="object",m=typeof importScripts=="function",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",g="",b,w,M;if(h){var C=(Tr(),qe(_r)),S=(Sr(),qe(Er));g=m?S.dirname(g)+"/":__dirname+"/",b=(i,c)=>(i=i.startsWith("file://")?new URL(i):S.normalize(i),C.readFileSync(i,c?void 0:"utf8")),M=i=>(i=b(i,!0),i.buffer||(i=new Uint8Array(i)),i),w=(i,c,p,O=!0)=>{i=i.startsWith("file://")?new URL(i):S.normalize(i),C.readFile(i,O?void 0:"utf8",(R,x)=>{R?p(R):c(O?x.buffer:x)})},!e.thisProgram&&1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.inspect=()=>"[Emscripten Module object]"}else(o||m)&&(m?g=self.location.href:typeof document<"u"&&document.currentScript&&(g=document.currentScript.src),n&&(g=n),g.indexOf("blob:")!==0?g=g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):g="",b=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.send(null),c.responseText},m&&(M=i=>{var c=new XMLHttpRequest;return c.open("GET",i,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),w=(i,c,p)=>{var O=new XMLHttpRequest;O.open("GET",i,!0),O.responseType="arraybuffer",O.onload=()=>{O.status==200||O.status==0&&O.response?c(O.response):p()},O.onerror=p,O.send(null)});var E=e.print||console.log.bind(console),F=e.printErr||console.error.bind(console);Object.assign(e,d),d=null,e.thisProgram&&(f=e.thisProgram);var L;e.wasmBinary&&(L=e.wasmBinary);var k=e.noExitRuntime||!0;typeof WebAssembly!="object"&&oe("no native wasm support detected");var z,P,Oe=!1,ve,he,U,Y;function se(){var i=z.buffer;e.HEAP8=ve=new Int8Array(i),e.HEAP16=new Int16Array(i),e.HEAP32=U=new Int32Array(i),e.HEAPU8=he=new Uint8Array(i),e.HEAPU16=new Uint16Array(i),e.HEAPU32=Y=new Uint32Array(i),e.HEAPF32=new Float32Array(i),e.HEAPF64=new Float64Array(i)}var Ce=[],Ge=[],K=[];function D(){var i=e.preRun.shift();Ce.unshift(i)}var N=0,ge=null,ce=null;function oe(i){throw e.onAbort&&e.onAbort(i),i="Aborted("+i+")",F(i),Oe=!0,i=new WebAssembly.RuntimeError(i+". Build with -sASSERTIONS for more info."),a(i),i}function Pe(i){return i.startsWith("data:application/octet-stream;base64,")}var ee;if(ee="ort-training-wasm-simd.wasm",!Pe(ee)){var de=ee;ee=e.locateFile?e.locateFile(de,g):g+de}function tt(i){if(i==ee&&L)return new Uint8Array(L);if(M)return M(i);throw"both async and sync fetching of the wasm failed"}function ye(i){if(!L&&(o||m)){if(typeof fetch=="function"&&!i.startsWith("file://"))return fetch(i,{credentials:"same-origin"}).then(c=>{if(!c.ok)throw"failed to load wasm binary file at '"+i+"'";return c.arrayBuffer()}).catch(()=>tt(i));if(w)return new Promise((c,p)=>{w(i,O=>c(new Uint8Array(O)),p)})}return Promise.resolve().then(()=>tt(i))}function Ie(i,c,p){return ye(i).then(O=>WebAssembly.instantiate(O,c)).then(O=>O).then(p,O=>{F("failed to asynchronously prepare wasm: "+O),oe(O)})}function ze(i,c){var p=ee;return L||typeof WebAssembly.instantiateStreaming!="function"||Pe(p)||p.startsWith("file://")||h||typeof fetch!="function"?Ie(p,i,c):fetch(p,{credentials:"same-origin"}).then(O=>WebAssembly.instantiateStreaming(O,i).then(c,function(R){return F("wasm streaming compile failed: "+R),F("falling back to ArrayBuffer instantiation"),Ie(p,i,c)}))}var Ee,_e=i=>{for(;0<i.length;)i.shift()(e)};function xe(i){this.Ja=i-24,this.Na=function(c){Y[this.Ja+4>>2>>>0]=c},this.Ma=function(c){Y[this.Ja+8>>2>>>0]=c},this.Ka=function(c,p){this.La(),this.Na(c),this.Ma(p)},this.La=function(){Y[this.Ja+16>>2>>>0]=0}}var ke=0,ae=0,X=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Te=(i,c,p)=>{c>>>=0;var O=c+p;for(p=c;i[p]&&!(p>=O);)++p;if(16<p-c&&i.buffer&&X)return X.decode(i.subarray(c,p));for(O="";c<p;){var R=i[c++];if(R&128){var x=i[c++]&63;if((R&224)==192)O+=String.fromCharCode((R&31)<<6|x);else{var H=i[c++]&63;R=(R&240)==224?(R&15)<<12|x<<6|H:(R&7)<<18|x<<12|H<<6|i[c++]&63,65536>R?O+=String.fromCharCode(R):(R-=65536,O+=String.fromCharCode(55296|R>>10,56320|R&1023))}}else O+=String.fromCharCode(R)}return O},Se=(i,c)=>(i>>>=0)?Te(he,i,c):"",Le=i=>{for(var c=0,p=0;p<i.length;++p){var O=i.charCodeAt(p);127>=O?c++:2047>=O?c+=2:55296<=O&&57343>=O?(c+=4,++p):c+=3}return c},rt=(i,c,p,O)=>{if(p>>>=0,!(0<O))return 0;var R=p;O=p+O-1;for(var x=0;x<i.length;++x){var H=i.charCodeAt(x);if(55296<=H&&57343>=H){var ne=i.charCodeAt(++x);H=65536+((H&1023)<<10)|ne&1023}if(127>=H){if(p>=O)break;c[p++>>>0]=H}else{if(2047>=H){if(p+1>=O)break;c[p++>>>0]=192|H>>6}else{if(65535>=H){if(p+2>=O)break;c[p++>>>0]=224|H>>12}else{if(p+3>=O)break;c[p++>>>0]=240|H>>18,c[p++>>>0]=128|H>>12&63}c[p++>>>0]=128|H>>6&63}c[p++>>>0]=128|H&63}}return c[p>>>0]=0,p-R},Ae=i=>i%4===0&&(i%100!==0||i%400===0),gt=[0,31,60,91,121,152,182,213,244,274,305,335],Be=[0,31,59,90,120,151,181,212,243,273,304,334],yt=i=>{var c=Le(i)+1,p=_t(c);return p&&rt(i,he,p,c),p},wt={},bt=()=>{if(!Ot){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},c;for(c in wt)wt[c]===void 0?delete i[c]:i[c]=wt[c];var p=[];for(c in i)p.push(`${c}=${i[c]}`);Ot=p}return Ot},Ot,Ne=[null,[],[]],je=[31,29,31,30,31,30,31,31,30,31,30,31],nt=[31,28,31,30,31,30,31,31,30,31,30,31];function Ft(i){var c=Array(Le(i)+1);return rt(i,c,0,c.length),c}function vt(i,c,p,O){function R(v,j,J){for(v=typeof v=="number"?v.toString():v||"";v.length<j;)v=J[0]+v;return v}function x(v,j){return R(v,j,"0")}function H(v,j){function J(At){return 0>At?-1:0<At?1:0}var De;return(De=J(v.getFullYear()-j.getFullYear()))===0&&(De=J(v.getMonth()-j.getMonth()))===0&&(De=J(v.getDate()-j.getDate())),De}function ne(v){switch(v.getDay()){case 0:return new Date(v.getFullYear()-1,11,29);case 1:return v;case 2:return new Date(v.getFullYear(),0,3);case 3:return new Date(v.getFullYear(),0,2);case 4:return new Date(v.getFullYear(),0,1);case 5:return new Date(v.getFullYear()-1,11,31);case 6:return new Date(v.getFullYear()-1,11,30)}}function pe(v){var j=v.Ea;for(v=new Date(new Date(v.Fa+1900,0,1).getTime());0<j;){var J=v.getMonth(),De=(Ae(v.getFullYear())?je:nt)[J];if(j>De-v.getDate())j-=De-v.getDate()+1,v.setDate(1),11>J?v.setMonth(J+1):(v.setMonth(0),v.setFullYear(v.getFullYear()+1));else{v.setDate(v.getDate()+j);break}}return J=new Date(v.getFullYear()+1,0,4),j=ne(new Date(v.getFullYear(),0,4)),J=ne(J),0>=H(j,v)?0>=H(J,v)?v.getFullYear()+1:v.getFullYear():v.getFullYear()-1}i>>>=0,c>>>=0,p>>>=0,O>>>=0;var ue=U[O+40>>2>>>0];O={Qa:U[O>>2>>>0],Pa:U[O+4>>2>>>0],Ga:U[O+8>>2>>>0],Ia:U[O+12>>2>>>0],Ha:U[O+16>>2>>>0],Fa:U[O+20>>2>>>0],za:U[O+24>>2>>>0],Ea:U[O+28>>2>>>0],Sa:U[O+32>>2>>>0],Oa:U[O+36>>2>>>0],Ra:ue?Se(ue):""},p=Se(p),ue={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var fe in ue)p=p.replace(new RegExp(fe,"g"),ue[fe]);var Et="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),St="January February March April May June July August September October November December".split(" ");ue={"%a":v=>Et[v.za].substring(0,3),"%A":v=>Et[v.za],"%b":v=>St[v.Ha].substring(0,3),"%B":v=>St[v.Ha],"%C":v=>x((v.Fa+1900)/100|0,2),"%d":v=>x(v.Ia,2),"%e":v=>R(v.Ia,2," "),"%g":v=>pe(v).toString().substring(2),"%G":v=>pe(v),"%H":v=>x(v.Ga,2),"%I":v=>(v=v.Ga,v==0?v=12:12<v&&(v-=12),x(v,2)),"%j":v=>{for(var j=0,J=0;J<=v.Ha-1;j+=(Ae(v.Fa+1900)?je:nt)[J++]);return x(v.Ia+j,3)},"%m":v=>x(v.Ha+1,2),"%M":v=>x(v.Pa,2),"%n":()=>`
`,"%p":v=>0<=v.Ga&&12>v.Ga?"AM":"PM","%S":v=>x(v.Qa,2),"%t":()=>"	","%u":v=>v.za||7,"%U":v=>x(Math.floor((v.Ea+7-v.za)/7),2),"%V":v=>{var j=Math.floor((v.Ea+7-(v.za+6)%7)/7);if(2>=(v.za+371-v.Ea-2)%7&&j++,j)j==53&&(J=(v.za+371-v.Ea)%7,J==4||J==3&&Ae(v.Fa)||(j=1));else{j=52;var J=(v.za+7-v.Ea-1)%7;(J==4||J==5&&Ae(v.Fa%400-1))&&j++}return x(j,2)},"%w":v=>v.za,"%W":v=>x(Math.floor((v.Ea+7-(v.za+6)%7)/7),2),"%y":v=>(v.Fa+1900).toString().substring(2),"%Y":v=>v.Fa+1900,"%z":v=>{v=v.Oa;var j=0<=v;return v=Math.abs(v)/60,(j?"+":"-")+("0000"+(v/60*100+v%60)).slice(-4)},"%Z":v=>v.Ra,"%%":()=>"%"},p=p.replace(/%%/g,"\0\0");for(fe in ue)p.includes(fe)&&(p=p.replace(new RegExp(fe,"g"),ue[fe](O)));return p=p.replace(/\0\0/g,"%"),fe=Ft(p),fe.length>c?0:(ve.set(fe,i>>>0),fe.length-1)}var Bt={a:function(i,c,p){throw i>>>=0,new xe(i).Ka(c>>>0,p>>>0),ke=i,ae++,ke},e:function(){return 0},H:function(){},x:function(){},z:function(){},k:function(){return 0},F:function(){},B:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},l:()=>!0,o:function(i,c,p){i=c+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*c:NaN,p>>>=0,i=new Date(1e3*i),U[p>>2>>>0]=i.getUTCSeconds(),U[p+4>>2>>>0]=i.getUTCMinutes(),U[p+8>>2>>>0]=i.getUTCHours(),U[p+12>>2>>>0]=i.getUTCDate(),U[p+16>>2>>>0]=i.getUTCMonth(),U[p+20>>2>>>0]=i.getUTCFullYear()-1900,U[p+24>>2>>>0]=i.getUTCDay(),U[p+28>>2>>>0]=(i.getTime()-Date.UTC(i.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(i,c,p){i=c+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*c:NaN,p>>>=0,i=new Date(1e3*i),U[p>>2>>>0]=i.getSeconds(),U[p+4>>2>>>0]=i.getMinutes(),U[p+8>>2>>>0]=i.getHours(),U[p+12>>2>>>0]=i.getDate(),U[p+16>>2>>>0]=i.getMonth(),U[p+20>>2>>>0]=i.getFullYear()-1900,U[p+24>>2>>>0]=i.getDay(),U[p+28>>2>>>0]=(Ae(i.getFullYear())?gt:Be)[i.getMonth()]+i.getDate()-1|0,U[p+36>>2>>>0]=-(60*i.getTimezoneOffset()),c=new Date(i.getFullYear(),6,1).getTimezoneOffset();var O=new Date(i.getFullYear(),0,1).getTimezoneOffset();U[p+32>>2>>>0]=(c!=O&&i.getTimezoneOffset()==Math.min(O,c))|0},q:function(i){i>>>=0;var c=new Date(U[i+20>>2>>>0]+1900,U[i+16>>2>>>0],U[i+12>>2>>>0],U[i+8>>2>>>0],U[i+4>>2>>>0],U[i>>2>>>0],0),p=U[i+32>>2>>>0],O=c.getTimezoneOffset(),R=new Date(c.getFullYear(),6,1).getTimezoneOffset(),x=new Date(c.getFullYear(),0,1).getTimezoneOffset(),H=Math.min(x,R);return 0>p?U[i+32>>2>>>0]=+(R!=x&&H==O):0<p!=(H==O)&&(R=Math.max(x,R),c.setTime(c.getTime()+6e4*((0<p?H:R)-O))),U[i+24>>2>>>0]=c.getDay(),U[i+28>>2>>>0]=(Ae(c.getFullYear())?gt:Be)[c.getMonth()]+c.getDate()-1|0,U[i>>2>>>0]=c.getSeconds(),U[i+4>>2>>>0]=c.getMinutes(),U[i+8>>2>>>0]=c.getHours(),U[i+12>>2>>>0]=c.getDate(),U[i+16>>2>>>0]=c.getMonth(),U[i+20>>2>>>0]=c.getYear(),i=c.getTime()/1e3,at((Ee=i,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)),i>>>0},m:function(){return-52},n:function(){},t:function(i,c,p){function O(pe){return(pe=pe.toTimeString().match(/\(([A-Za-z ]+)\)$/))?pe[1]:"GMT"}p>>>=0;var R=new Date().getFullYear(),x=new Date(R,0,1),H=new Date(R,6,1);R=x.getTimezoneOffset();var ne=H.getTimezoneOffset();Y[i>>>0>>2>>>0]=60*Math.max(R,ne),U[c>>>0>>2>>>0]=+(R!=ne),i=O(x),c=O(H),i=yt(i),c=yt(c),ne<R?(Y[p>>2>>>0]=i,Y[p+4>>2>>>0]=c):(Y[p>>2>>>0]=c,Y[p+4>>2>>>0]=i)},d:()=>{oe("")},h:function(){return Date.now()},u:function(){return 4294901760},b:()=>performance.now(),I:function(i,c,p){return c>>>=0,he.copyWithin(i>>>0>>>0,c>>>0,c+(p>>>0)>>>0)},s:function(i){i>>>=0;var c=he.length;if(4294901760<i)return!1;for(var p=1;4>=p;p*=2){var O=c*(1+.2/p);O=Math.min(O,i+100663296);var R=Math;O=Math.max(i,O);e:{R=R.min.call(R,4294901760,O+(65536-O%65536)%65536)-z.buffer.byteLength+65535>>>16;try{z.grow(R),se();var x=1;break e}catch{}x=void 0}if(x)return!0}return!1},C:function(i,c){i>>>=0,c>>>=0;var p=0;return bt().forEach(function(O,R){var x=c+p;for(R=Y[i+4*R>>2>>>0]=x,x=0;x<O.length;++x)ve[R++>>0>>>0]=O.charCodeAt(x);ve[R>>0>>>0]=0,p+=O.length+1}),0},D:function(i,c){i>>>=0,c>>>=0;var p=bt();Y[i>>2>>>0]=p.length;var O=0;return p.forEach(function(R){O+=R.length+1}),Y[c>>2>>>0]=O,0},f:()=>52,j:function(){return 52},r:function(){return 70},i:function(i,c,p,O){c>>>=0,p>>>=0,O>>>=0;for(var R=0,x=0;x<p;x++){var H=Y[c>>2>>>0],ne=Y[c+4>>2>>>0];c+=8;for(var pe=0;pe<ne;pe++){var ue=he[H+pe>>>0],fe=Ne[i];ue===0||ue===10?((i===1?E:F)(Te(fe,0)),fe.length=0):fe.push(ue)}R+=ne}return Y[O>>2>>>0]=R,0},A:vt,c:function(i,c,p,O){return vt(i>>>0,c>>>0,p>>>0,O>>>0)}};(function(){function i(p){if(p=p.exports,P=p=it(p),z=P.J,se(),Ge.unshift(P.K),N--,e.monitorRunDependencies&&e.monitorRunDependencies(N),N==0&&(ge!==null&&(clearInterval(ge),ge=null),ce)){var O=ce;ce=null,O()}return p}var c={a:Bt};if(N++,e.monitorRunDependencies&&e.monitorRunDependencies(N),e.instantiateWasm)try{return e.instantiateWasm(c,i)}catch(p){F("Module.instantiateWasm callback failed with error: "+p),a(p)}return ze(c,function(p){i(p.instance)}).catch(a),{}})(),e._OrtInit=(i,c)=>(e._OrtInit=P.L)(i,c),e._OrtGetLastError=(i,c)=>(e._OrtGetLastError=P.M)(i,c),e._OrtCreateSessionOptions=(i,c,p,O,R,x,H,ne,pe,ue)=>(e._OrtCreateSessionOptions=P.N)(i,c,p,O,R,x,H,ne,pe,ue),e._OrtAppendExecutionProvider=(i,c)=>(e._OrtAppendExecutionProvider=P.O)(i,c),e._OrtAddFreeDimensionOverride=(i,c,p)=>(e._OrtAddFreeDimensionOverride=P.P)(i,c,p),e._OrtAddSessionConfigEntry=(i,c,p)=>(e._OrtAddSessionConfigEntry=P.Q)(i,c,p),e._OrtReleaseSessionOptions=i=>(e._OrtReleaseSessionOptions=P.R)(i),e._OrtCreateSession=(i,c,p)=>(e._OrtCreateSession=P.S)(i,c,p),e._OrtReleaseSession=i=>(e._OrtReleaseSession=P.T)(i),e._OrtGetInputOutputCount=(i,c,p)=>(e._OrtGetInputOutputCount=P.U)(i,c,p),e._OrtGetInputName=(i,c)=>(e._OrtGetInputName=P.V)(i,c),e._OrtGetOutputName=(i,c)=>(e._OrtGetOutputName=P.W)(i,c),e._OrtFree=i=>(e._OrtFree=P.X)(i),e._OrtCreateTensor=(i,c,p,O,R,x)=>(e._OrtCreateTensor=P.Y)(i,c,p,O,R,x),e._OrtGetTensorData=(i,c,p,O,R)=>(e._OrtGetTensorData=P.Z)(i,c,p,O,R),e._OrtReleaseTensor=i=>(e._OrtReleaseTensor=P._)(i),e._OrtCreateRunOptions=(i,c,p,O)=>(e._OrtCreateRunOptions=P.$)(i,c,p,O),e._OrtAddRunConfigEntry=(i,c,p)=>(e._OrtAddRunConfigEntry=P.aa)(i,c,p),e._OrtReleaseRunOptions=i=>(e._OrtReleaseRunOptions=P.ba)(i),e._OrtCreateBinding=i=>(e._OrtCreateBinding=P.ca)(i),e._OrtBindInput=(i,c,p)=>(e._OrtBindInput=P.da)(i,c,p),e._OrtBindOutput=(i,c,p,O)=>(e._OrtBindOutput=P.ea)(i,c,p,O),e._OrtClearBoundOutputs=i=>(e._OrtClearBoundOutputs=P.fa)(i),e._OrtReleaseBinding=i=>(e._OrtReleaseBinding=P.ga)(i),e._OrtRunWithBinding=(i,c,p,O,R)=>(e._OrtRunWithBinding=P.ha)(i,c,p,O,R),e._OrtRun=(i,c,p,O,R,x,H,ne)=>(e._OrtRun=P.ia)(i,c,p,O,R,x,H,ne),e._OrtEndProfiling=i=>(e._OrtEndProfiling=P.ja)(i),e._OrtTrainingLoadCheckpoint=(i,c)=>(e._OrtTrainingLoadCheckpoint=P.ka)(i,c),e._OrtTrainingReleaseCheckpoint=i=>(e._OrtTrainingReleaseCheckpoint=P.la)(i),e._OrtTrainingCreateSession=(i,c,p,O,R,x,H,ne)=>(e._OrtTrainingCreateSession=P.ma)(i,c,p,O,R,x,H,ne),e._OrtTrainingLazyResetGrad=i=>(e._OrtTrainingLazyResetGrad=P.na)(i),e._OrtTrainingRunTrainStep=(i,c,p,O,R,x)=>(e._OrtTrainingRunTrainStep=P.oa)(i,c,p,O,R,x),e._OrtTrainingOptimizerStep=(i,c)=>(e._OrtTrainingOptimizerStep=P.pa)(i,c),e._OrtTrainingEvalStep=(i,c,p,O,R,x)=>(e._OrtTrainingEvalStep=P.qa)(i,c,p,O,R,x),e._OrtTrainingGetParametersSize=(i,c,p)=>(e._OrtTrainingGetParametersSize=P.ra)(i,c,p),e._OrtTrainingCopyParametersToBuffer=(i,c,p,O)=>(e._OrtTrainingCopyParametersToBuffer=P.sa)(i,c,p,O),e._OrtTrainingCopyParametersFromBuffer=(i,c,p,O)=>(e._OrtTrainingCopyParametersFromBuffer=P.ta)(i,c,p,O),e._OrtTrainingGetModelInputOutputCount=(i,c,p,O)=>(e._OrtTrainingGetModelInputOutputCount=P.ua)(i,c,p,O),e._OrtTrainingGetModelInputOutputName=(i,c,p,O)=>(e._OrtTrainingGetModelInputOutputName=P.va)(i,c,p,O),e._OrtTrainingReleaseSession=i=>(e._OrtTrainingReleaseSession=P.wa)(i);var _t=e._malloc=i=>(_t=e._malloc=P.xa)(i);e._free=i=>(e._free=P.ya)(i);var at=i=>(at=P.Aa)(i),Tt=()=>(Tt=P.Ba)(),ot=i=>(ot=P.Ca)(i),B=i=>(B=P.Da)(i);function it(i){i=Object.assign({},i);var c=O=>()=>O()>>>0,p=O=>R=>O(R)>>>0;return i.__errno_location=c(i.__errno_location),i.malloc=p(i.malloc),i.stackSave=c(i.stackSave),i.stackAlloc=p(i.stackAlloc),i}e.stackAlloc=B,e.stackSave=Tt,e.stackRestore=ot,e.UTF8ToString=Se,e.stringToUTF8=(i,c,p)=>rt(i,he,c,p),e.lengthBytesUTF8=Le;var $e;ce=function i(){$e||Ye(),$e||(ce=i)};function Ye(){function i(){if(!$e&&($e=!0,e.calledRun=!0,!Oe)){if(_e(Ge),u(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;){var c=e.postRun.shift();K.unshift(c)}_e(K)}}if(!(0<N)){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)D();_e(Ce),0<N||(e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),i()},1)):i())}}if(e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Ye(),r.ready}})();typeof Xn=="object"&&typeof Ar=="object"?Ar.exports=Jn:typeof define=="function"&&define.amd&&define([],()=>Jn)});var Zn=ut(()=>{});var Kn=ut(()=>{});var ea={};ft(ea,{cpus:()=>ao});var ao,ta=W(()=>{ao=void 0});var aa=ut((na,Mr)=>{"use strict";var ra=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(r={}){function e(){return K.buffer!=oe.buffer&&ye(),oe}function u(){return K.buffer!=oe.buffer&&ye(),Pe}function a(){return K.buffer!=oe.buffer&&ye(),ee}function d(){return K.buffer!=oe.buffer&&ye(),de}function f(){return K.buffer!=oe.buffer&&ye(),tt}var o=r,m,h;o.ready=new Promise((t,s)=>{m=t,h=s});var g=Object.assign({},o),b="./this.program",w=(t,s)=>{throw s},M=typeof window=="object",C=typeof importScripts=="function",S=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",E=o.ENVIRONMENT_IS_PTHREAD||!1,F="";function L(t){return o.locateFile?o.locateFile(t,F):F+t}var k,z,P;if(S){var Oe=(Tr(),qe(_r)),ve=(Sr(),qe(Er));F=C?ve.dirname(F)+"/":__dirname+"/",k=(s,l)=>(s=s.startsWith("file://")?new URL(s):ve.normalize(s),Oe.readFileSync(s,l?void 0:"utf8")),P=s=>(s=k(s,!0),s.buffer||(s=new Uint8Array(s)),s),z=(s,l,y,A=!0)=>{s=s.startsWith("file://")?new URL(s):ve.normalize(s),Oe.readFile(s,A?void 0:"utf8",(T,I)=>{T?y(T):l(A?I.buffer:I)})},!o.thisProgram&&1<process.argv.length&&(b=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),w=(s,l)=>{throw process.exitCode=s,l},o.inspect=()=>"[Emscripten Module object]";let t;try{t=Zn()}catch(s){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),s}global.Worker=t.Worker}else(M||C)&&(C?F=self.location.href:typeof document<"u"&&document.currentScript&&(F=document.currentScript.src),typeof n<"u"&&n&&(F=n),F.indexOf("blob:")!==0?F=F.substr(0,F.replace(/[?#].*/,"").lastIndexOf("/")+1):F="",S||(k=t=>{var s=new XMLHttpRequest;return s.open("GET",t,!1),s.send(null),s.responseText},C&&(P=t=>{var s=new XMLHttpRequest;return s.open("GET",t,!1),s.responseType="arraybuffer",s.send(null),new Uint8Array(s.response)}),z=(t,s,l)=>{var y=new XMLHttpRequest;y.open("GET",t,!0),y.responseType="arraybuffer",y.onload=()=>{y.status==200||y.status==0&&y.response?s(y.response):l()},y.onerror=l,y.send(null)}));S&&typeof performance>"u"&&(global.performance=Kn().performance);var he=console.log.bind(console),U=console.error.bind(console);S&&(he=(...t)=>Oe.writeSync(1,t.join(" ")+`
`),U=(...t)=>Oe.writeSync(2,t.join(" ")+`
`));var Y=o.print||he,se=o.printErr||U;Object.assign(o,g),g=null,o.thisProgram&&(b=o.thisProgram),o.quit&&(w=o.quit);var Ce;o.wasmBinary&&(Ce=o.wasmBinary);var Ge=o.noExitRuntime||!0;typeof WebAssembly!="object"&&Ae("no native wasm support detected");var K,D,N,ge=!1,ce,oe,Pe,ee,de,tt;function ye(){var t=K.buffer;o.HEAP8=oe=new Int8Array(t),o.HEAP16=new Int16Array(t),o.HEAP32=ee=new Int32Array(t),o.HEAPU8=Pe=new Uint8Array(t),o.HEAPU16=new Uint16Array(t),o.HEAPU32=de=new Uint32Array(t),o.HEAPF32=new Float32Array(t),o.HEAPF64=tt=new Float64Array(t)}var Ie=o.INITIAL_MEMORY||16777216;if(5242880<=Ie||Ae("INITIAL_MEMORY should be larger than STACK_SIZE, was "+Ie+"! (STACK_SIZE=5242880)"),E)K=o.wasmMemory;else if(o.wasmMemory)K=o.wasmMemory;else if(K=new WebAssembly.Memory({initial:Ie/65536,maximum:65536,shared:!0}),!(K.buffer instanceof SharedArrayBuffer))throw se("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),S&&se("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");ye(),Ie=K.buffer.byteLength;var ze,Ee=[],_e=[],xe=[],ke=0;function ae(){return Ge||0<ke}var X=0,Te=null,Se=null;function Le(){X++,o.monitorRunDependencies&&o.monitorRunDependencies(X)}function rt(){if(X--,o.monitorRunDependencies&&o.monitorRunDependencies(X),X==0&&(Te!==null&&(clearInterval(Te),Te=null),Se)){var t=Se;Se=null,t()}}function Ae(t){throw o.onAbort&&o.onAbort(t),t="Aborted("+t+")",se(t),ge=!0,ce=1,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),h(t),t}function gt(t){return t.startsWith("data:application/octet-stream;base64,")}var Be;Be="ort-wasm-threaded.wasm",gt(Be)||(Be=L(Be));function yt(t){if(t==Be&&Ce)return new Uint8Array(Ce);if(P)return P(t);throw"both async and sync fetching of the wasm failed"}function wt(t){if(!Ce&&(M||C)){if(typeof fetch=="function"&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then(s=>{if(!s.ok)throw"failed to load wasm binary file at '"+t+"'";return s.arrayBuffer()}).catch(()=>yt(t));if(z)return new Promise((s,l)=>{z(t,y=>s(new Uint8Array(y)),l)})}return Promise.resolve().then(()=>yt(t))}function bt(t,s,l){return wt(t).then(y=>WebAssembly.instantiate(y,s)).then(y=>y).then(l,y=>{se("failed to asynchronously prepare wasm: "+y),Ae(y)})}function Ot(t,s){var l=Be;return Ce||typeof WebAssembly.instantiateStreaming!="function"||gt(l)||l.startsWith("file://")||S||typeof fetch!="function"?bt(l,t,s):fetch(l,{credentials:"same-origin"}).then(y=>WebAssembly.instantiateStreaming(y,t).then(s,function(A){return se("wasm streaming compile failed: "+A),se("falling back to ArrayBuffer instantiation"),bt(l,t,s)}))}var Ne;function je(t){this.name="ExitStatus",this.message=`Program terminated with exit(${t})`,this.status=t}function nt(t){t.terminate(),t.onmessage=()=>{}}function Ft(t){(t=B.La[t])||Ae(),B.lb(t)}function vt(t){var s=B.fb();if(!s)return 6;B.Oa.push(s),B.La[t.Na]=s,s.Na=t.Na;var l={cmd:"run",start_routine:t.mb,arg:t.eb,pthread_ptr:t.Na};return S&&s.unref(),s.postMessage(l,t.sb),0}var Bt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,_t=(t,s,l)=>{s>>>=0;var y=s+l;for(l=s;t[l]&&!(l>=y);)++l;if(16<l-s&&t.buffer&&Bt)return Bt.decode(t.buffer instanceof SharedArrayBuffer?t.slice(s,l):t.subarray(s,l));for(y="";s<l;){var A=t[s++];if(A&128){var T=t[s++]&63;if((A&224)==192)y+=String.fromCharCode((A&31)<<6|T);else{var I=t[s++]&63;A=(A&240)==224?(A&15)<<12|T<<6|I:(A&7)<<18|T<<12|I<<6|t[s++]&63,65536>A?y+=String.fromCharCode(A):(A-=65536,y+=String.fromCharCode(55296|A>>10,56320|A&1023))}}else y+=String.fromCharCode(A)}return y},at=(t,s)=>(t>>>=0)?_t(u(),t,s):"";function Tt(t){if(E)return Q(1,1,t);ce=t,ae()||(B.nb(),o.onExit&&o.onExit(t),ge=!0),w(t,new je(t))}var ot=t=>{if(ce=t,E)throw $e(t),"unwind";Tt(t)},B={Ra:[],Oa:[],Za:[],La:{},Va:function(){E?B.hb():B.gb()},gb:function(){Ee.unshift(()=>{Le(),B.ib(()=>rt())})},hb:function(){B.receiveObjectTransfer=B.kb,B.threadInitTLS=B.Ya,B.setExitStatus=B.Xa,Ge=!1},Xa:function(t){ce=t},xb:["$terminateWorker"],nb:function(){for(var t of B.Oa)nt(t);for(t of B.Ra)nt(t);B.Ra=[],B.Oa=[],B.La=[]},lb:function(t){var s=t.Na;delete B.La[s],B.Ra.push(t),B.Oa.splice(B.Oa.indexOf(t),1),t.Na=0,pr(s)},kb:function(){},Ya:function(){B.Za.forEach(t=>t())},jb:t=>new Promise(s=>{t.onmessage=T=>{T=T.data;var I=T.cmd;if(T.targetThread&&T.targetThread!=Lt()){var te=B.La[T.wb];te?te.postMessage(T,T.transferList):se('Internal error! Worker sent a message "'+I+'" to target pthread '+T.targetThread+", but that thread no longer exists!")}else I==="checkMailbox"?kt():I==="spawnThread"?vt(T):I==="cleanupThread"?Ft(T.thread):I==="killThread"?(T=T.thread,I=B.La[T],delete B.La[T],nt(I),pr(T),B.Oa.splice(B.Oa.indexOf(I),1),I.Na=0):I==="cancelThread"?B.La[T.thread].postMessage({cmd:"cancel"}):I==="loaded"?(t.loaded=!0,s(t)):I==="alert"?alert("Thread "+T.threadId+": "+T.text):T.target==="setimmediate"?t.postMessage(T):I==="callHandler"?o[T.handler](...T.args):I&&se("worker sent an unknown command "+I)},t.onerror=T=>{throw se("worker sent an error! "+T.filename+":"+T.lineno+": "+T.message),T},S&&(t.on("message",function(T){t.onmessage({data:T})}),t.on("error",function(T){t.onerror(T)}));var l=[],y=["onExit","onAbort","print","printErr"],A;for(A of y)o.hasOwnProperty(A)&&l.push(A);t.postMessage({cmd:"load",handlers:l,urlOrBlob:o.mainScriptUrlOrBlob||n,wasmMemory:K,wasmModule:N})}),ib:function(t){t()},cb:function(){var t=L("ort-wasm-threaded.worker.js");t=new Worker(t),B.Ra.push(t)},fb:function(){return B.Ra.length==0&&(B.cb(),B.jb(B.Ra[0])),B.Ra.pop()}};o.PThread=B;var it=t=>{for(;0<t.length;)t.shift()(o)};o.establishStackSpace=function(){var t=Lt(),s=a()[t+52>>2>>>0];t=a()[t+56>>2>>>0],cn(s,s-t),Nt(s)};function $e(t){if(E)return Q(2,0,t);ot(t)}var Ye=[];o.invokeEntryPoint=function(t,s){var l=Ye[t];l||(t>=Ye.length&&(Ye.length=t+1),Ye[t]=l=ze.get(t)),t=l(s),ae()?B.Xa(t):mr(t)};function i(t){this.Ua=t-24,this.bb=function(s){d()[this.Ua+4>>2>>>0]=s},this.ab=function(s){d()[this.Ua+8>>2>>>0]=s},this.Va=function(s,l){this.$a(),this.bb(s),this.ab(l)},this.$a=function(){d()[this.Ua+16>>2>>>0]=0}}var c=0,p=0;function O(t,s,l,y){return E?Q(3,1,t,s,l,y):R(t,s,l,y)}function R(t,s,l,y){if(t>>>=0,s>>>=0,l>>>=0,y>>>=0,typeof SharedArrayBuffer>"u")return se("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var A=[];return E&&A.length===0?O(t,s,l,y):(t={mb:l,Na:t,eb:y,sb:A},E?(t.ub="spawnThread",postMessage(t,A),0):vt(t))}function x(t,s,l){return E?Q(4,1,t,s,l):0}function H(t,s){if(E)return Q(5,1,t,s)}var ne=t=>{for(var s=0,l=0;l<t.length;++l){var y=t.charCodeAt(l);127>=y?s++:2047>=y?s+=2:55296<=y&&57343>=y?(s+=4,++l):s+=3}return s},pe=(t,s,l,y)=>{if(l>>>=0,!(0<y))return 0;var A=l;y=l+y-1;for(var T=0;T<t.length;++T){var I=t.charCodeAt(T);if(55296<=I&&57343>=I){var te=t.charCodeAt(++T);I=65536+((I&1023)<<10)|te&1023}if(127>=I){if(l>=y)break;s[l++>>>0]=I}else{if(2047>=I){if(l+1>=y)break;s[l++>>>0]=192|I>>6}else{if(65535>=I){if(l+2>=y)break;s[l++>>>0]=224|I>>12}else{if(l+3>=y)break;s[l++>>>0]=240|I>>18,s[l++>>>0]=128|I>>12&63}s[l++>>>0]=128|I>>6&63}s[l++>>>0]=128|I&63}}return s[l>>>0]=0,l-A},ue=(t,s,l)=>pe(t,u(),s,l);function fe(t,s){if(E)return Q(6,1,t,s)}function Et(t,s,l){if(E)return Q(7,1,t,s,l)}function St(t,s,l){return E?Q(8,1,t,s,l):0}function v(t,s){if(E)return Q(9,1,t,s)}function j(t,s,l){if(E)return Q(10,1,t,s,l)}function J(t,s,l,y){if(E)return Q(11,1,t,s,l,y)}function De(t,s,l,y){if(E)return Q(12,1,t,s,l,y)}function At(t,s,l,y){if(E)return Q(13,1,t,s,l,y)}function Wr(t){if(E)return Q(14,1,t)}function Gr(t,s){if(E)return Q(15,1,t,s)}function zr(t,s,l){if(E)return Q(16,1,t,s,l)}var Wa=t=>{if(!ge)try{if(t(),!ae())try{E?mr(ce):ot(ce)}catch(s){s instanceof je||s=="unwind"||w(1,s)}}catch(s){s instanceof je||s=="unwind"||w(1,s)}};function fr(t){t>>>=0,typeof Atomics.tb=="function"&&(Atomics.tb(a(),t>>2,t).value.then(kt),t+=128,Atomics.store(a(),t>>2,1))}o.__emscripten_thread_mailbox_await=fr;function kt(){var t=Lt();t&&(fr(t),Wa(()=>fn()))}o.checkMailbox=kt;var st=t=>t%4===0&&(t%100!==0||t%400===0),jr=[0,31,60,91,121,152,182,213,244,274,305,335],$r=[0,31,59,90,120,151,181,212,243,273,304,334];function Yr(t,s,l,y,A,T,I,te){return E?Q(17,1,t,s,l,y,A,T,I,te):-52}function Vr(t,s,l,y,A,T,I){if(E)return Q(18,1,t,s,l,y,A,T,I)}var qr=t=>{var s=ne(t)+1,l=on(s);return l&&ue(t,l,s),l},Ga=t=>{var s=hr();return t=t(),Nt(s),t};function Q(t,s){var l=arguments.length-2,y=arguments;return Ga(()=>{for(var A=gr(8*l),T=A>>3,I=0;I<l;I++){var te=y[2+I];f()[T+I>>>0]=te}return un(t,l,A,s)})}var lr=[],cr={},Jr=()=>{if(!dr){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:b||"./this.program"},s;for(s in cr)cr[s]===void 0?delete t[s]:t[s]=cr[s];var l=[];for(s in t)l.push(`${s}=${t[s]}`);dr=l}return dr},dr;function Xr(t,s){if(E)return Q(19,1,t,s);t>>>=0,s>>>=0;var l=0;return Jr().forEach(function(y,A){var T=s+l;for(A=d()[t+4*A>>2>>>0]=T,T=0;T<y.length;++T)e()[A++>>0>>>0]=y.charCodeAt(T);e()[A>>0>>>0]=0,l+=y.length+1}),0}function Qr(t,s){if(E)return Q(20,1,t,s);t>>>=0,s>>>=0;var l=Jr();d()[t>>2>>>0]=l.length;var y=0;return l.forEach(function(A){y+=A.length+1}),d()[s>>2>>>0]=y,0}function Zr(t){return E?Q(21,1,t):52}function Kr(t,s,l,y){return E?Q(22,1,t,s,l,y):52}function en(t,s,l,y,A){return E?Q(23,1,t,s,l,y,A):70}var za=[null,[],[]];function tn(t,s,l,y){if(E)return Q(24,1,t,s,l,y);s>>>=0,l>>>=0,y>>>=0;for(var A=0,T=0;T<l;T++){var I=d()[s>>2>>>0],te=d()[s+4>>2>>>0];s+=8;for(var Ue=0;Ue<te;Ue++){var ie=u()[I+Ue>>>0],we=za[t];ie===0||ie===10?((t===1?Y:se)(_t(we,0)),we.length=0):we.push(ie)}A+=te}return d()[y>>2>>>0]=A,0}var rn=[31,29,31,30,31,30,31,31,30,31,30,31],nn=[31,28,31,30,31,30,31,31,30,31,30,31];function ja(t){var s=Array(ne(t)+1);return pe(t,s,0,s.length),s}var $a=(t,s)=>{e().set(t,s>>>0)};function an(t,s,l,y){function A(_,V,re){for(_=typeof _=="number"?_.toString():_||"";_.length<V;)_=re[0]+_;return _}function T(_,V){return A(_,V,"0")}function I(_,V){function re(hn){return 0>hn?-1:0<hn?1:0}var Ve;return(Ve=re(_.getFullYear()-V.getFullYear()))===0&&(Ve=re(_.getMonth()-V.getMonth()))===0&&(Ve=re(_.getDate()-V.getDate())),Ve}function te(_){switch(_.getDay()){case 0:return new Date(_.getFullYear()-1,11,29);case 1:return _;case 2:return new Date(_.getFullYear(),0,3);case 3:return new Date(_.getFullYear(),0,2);case 4:return new Date(_.getFullYear(),0,1);case 5:return new Date(_.getFullYear()-1,11,31);case 6:return new Date(_.getFullYear()-1,11,30)}}function Ue(_){var V=_.Pa;for(_=new Date(new Date(_.Qa+1900,0,1).getTime());0<V;){var re=_.getMonth(),Ve=(st(_.getFullYear())?rn:nn)[re];if(V>Ve-_.getDate())V-=Ve-_.getDate()+1,_.setDate(1),11>re?_.setMonth(re+1):(_.setMonth(0),_.setFullYear(_.getFullYear()+1));else{_.setDate(_.getDate()+V);break}}return re=new Date(_.getFullYear()+1,0,4),V=te(new Date(_.getFullYear(),0,4)),re=te(re),0>=I(V,_)?0>=I(re,_)?_.getFullYear()+1:_.getFullYear():_.getFullYear()-1}t>>>=0,s>>>=0,l>>>=0,y>>>=0;var ie=a()[y+40>>2>>>0];y={qb:a()[y>>2>>>0],pb:a()[y+4>>2>>>0],Sa:a()[y+8>>2>>>0],Wa:a()[y+12>>2>>>0],Ta:a()[y+16>>2>>>0],Qa:a()[y+20>>2>>>0],Ma:a()[y+24>>2>>>0],Pa:a()[y+28>>2>>>0],yb:a()[y+32>>2>>>0],ob:a()[y+36>>2>>>0],rb:ie?at(ie):""},l=at(l),ie={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var we in ie)l=l.replace(new RegExp(we,"g"),ie[we]);var pn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),mn="January February March April May June July August September October November December".split(" ");ie={"%a":_=>pn[_.Ma].substring(0,3),"%A":_=>pn[_.Ma],"%b":_=>mn[_.Ta].substring(0,3),"%B":_=>mn[_.Ta],"%C":_=>T((_.Qa+1900)/100|0,2),"%d":_=>T(_.Wa,2),"%e":_=>A(_.Wa,2," "),"%g":_=>Ue(_).toString().substring(2),"%G":_=>Ue(_),"%H":_=>T(_.Sa,2),"%I":_=>(_=_.Sa,_==0?_=12:12<_&&(_-=12),T(_,2)),"%j":_=>{for(var V=0,re=0;re<=_.Ta-1;V+=(st(_.Qa+1900)?rn:nn)[re++]);return T(_.Wa+V,3)},"%m":_=>T(_.Ta+1,2),"%M":_=>T(_.pb,2),"%n":()=>`
`,"%p":_=>0<=_.Sa&&12>_.Sa?"AM":"PM","%S":_=>T(_.qb,2),"%t":()=>"	","%u":_=>_.Ma||7,"%U":_=>T(Math.floor((_.Pa+7-_.Ma)/7),2),"%V":_=>{var V=Math.floor((_.Pa+7-(_.Ma+6)%7)/7);if(2>=(_.Ma+371-_.Pa-2)%7&&V++,V)V==53&&(re=(_.Ma+371-_.Pa)%7,re==4||re==3&&st(_.Qa)||(V=1));else{V=52;var re=(_.Ma+7-_.Pa-1)%7;(re==4||re==5&&st(_.Qa%400-1))&&V++}return T(V,2)},"%w":_=>_.Ma,"%W":_=>T(Math.floor((_.Pa+7-(_.Ma+6)%7)/7),2),"%y":_=>(_.Qa+1900).toString().substring(2),"%Y":_=>_.Qa+1900,"%z":_=>{_=_.ob;var V=0<=_;return _=Math.abs(_)/60,(V?"+":"-")+("0000"+(_/60*100+_%60)).slice(-4)},"%Z":_=>_.rb,"%%":()=>"%"},l=l.replace(/%%/g,"\0\0");for(we in ie)l.includes(we)&&(l=l.replace(new RegExp(we,"g"),ie[we](y)));return l=l.replace(/\0\0/g,"%"),we=ja(l),we.length>s?0:($a(we,t),we.length-1)}B.Va();var Ya=[null,Tt,$e,O,x,H,fe,Et,St,v,j,J,De,At,Wr,Gr,zr,Yr,Vr,Xr,Qr,Zr,Kr,en,tn],Va={b:function(t,s,l){throw t>>>=0,new i(t).Va(s>>>0,l>>>0),c=t,p++,c},N:function(t){sn(t>>>0,!C,1,!M,131072,!1),B.Ya()},j:function(t){t>>>=0,E?postMessage({cmd:"cleanupThread",thread:t}):Ft(t)},I:R,h:x,T:H,D:fe,F:Et,U:St,R:v,J:j,Q:J,n:De,E:At,B:Wr,S:Gr,C:zr,q:()=>!0,z:function(t,s){t>>>=0,t==s>>>0?setTimeout(()=>kt()):E?postMessage({targetThread:t,cmd:"checkMailbox"}):(t=B.La[t])&&t.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:fr,p:function(t){S&&B.La[t>>>0].ref()},t:function(t,s,l){t=s+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*s:NaN,l>>>=0,t=new Date(1e3*t),a()[l>>2>>>0]=t.getUTCSeconds(),a()[l+4>>2>>>0]=t.getUTCMinutes(),a()[l+8>>2>>>0]=t.getUTCHours(),a()[l+12>>2>>>0]=t.getUTCDate(),a()[l+16>>2>>>0]=t.getUTCMonth(),a()[l+20>>2>>>0]=t.getUTCFullYear()-1900,a()[l+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[l+28>>2>>>0]=t},u:function(t,s,l){t=s+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*s:NaN,l>>>=0,t=new Date(1e3*t),a()[l>>2>>>0]=t.getSeconds(),a()[l+4>>2>>>0]=t.getMinutes(),a()[l+8>>2>>>0]=t.getHours(),a()[l+12>>2>>>0]=t.getDate(),a()[l+16>>2>>>0]=t.getMonth(),a()[l+20>>2>>>0]=t.getFullYear()-1900,a()[l+24>>2>>>0]=t.getDay(),s=(st(t.getFullYear())?jr:$r)[t.getMonth()]+t.getDate()-1|0,a()[l+28>>2>>>0]=s,a()[l+36>>2>>>0]=-(60*t.getTimezoneOffset()),s=new Date(t.getFullYear(),6,1).getTimezoneOffset();var y=new Date(t.getFullYear(),0,1).getTimezoneOffset();t=(s!=y&&t.getTimezoneOffset()==Math.min(y,s))|0,a()[l+32>>2>>>0]=t},v:function(t){t>>>=0;var s=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),l=a()[t+32>>2>>>0],y=s.getTimezoneOffset(),A=new Date(s.getFullYear(),6,1).getTimezoneOffset(),T=new Date(s.getFullYear(),0,1).getTimezoneOffset(),I=Math.min(T,A);return 0>l?a()[t+32>>2>>>0]=+(A!=T&&I==y):0<l!=(I==y)&&(A=Math.max(T,A),s.setTime(s.getTime()+6e4*((0<l?I:A)-y))),a()[t+24>>2>>>0]=s.getDay(),l=(st(s.getFullYear())?jr:$r)[s.getMonth()]+s.getDate()-1|0,a()[t+28>>2>>>0]=l,a()[t>>2>>>0]=s.getSeconds(),a()[t+4>>2>>>0]=s.getMinutes(),a()[t+8>>2>>>0]=s.getHours(),a()[t+12>>2>>>0]=s.getDate(),a()[t+16>>2>>>0]=s.getMonth(),a()[t+20>>2>>>0]=s.getYear(),t=s.getTime()/1e3,ln((Ne=t,1<=+Math.abs(Ne)?0<Ne?+Math.floor(Ne/4294967296)>>>0:~~+Math.ceil((Ne-+(~~Ne>>>0))/4294967296)>>>0:0)),t>>>0},r:Yr,s:Vr,y:function(t,s,l){function y(ie){return(ie=ie.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ie[1]:"GMT"}t>>>=0,s>>>=0,l>>>=0;var A=new Date().getFullYear(),T=new Date(A,0,1),I=new Date(A,6,1);A=T.getTimezoneOffset();var te=I.getTimezoneOffset(),Ue=Math.max(A,te);d()[t>>2>>>0]=60*Ue,a()[s>>2>>>0]=+(A!=te),t=y(T),s=y(I),t=qr(t),s=qr(s),te<A?(d()[l>>2>>>0]=t,d()[l+4>>2>>>0]=s):(d()[l>>2>>>0]=s,d()[l+4>>2>>>0]=t)},c:()=>{Ae("")},k:function(){},i:function(){return Date.now()},o:()=>{throw ke+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return S?(ta(),qe(ea)).cpus().length:navigator.hardwareConcurrency},K:function(t,s,l,y){for(B.vb=s>>>0,lr.length=l,s=y>>>0>>3,y=0;y<l;y++)lr[y]=f()[s+y>>>0];return Ya[t].apply(null,lr)},x:function(t){t>>>=0;var s=u().length;if(t<=s||4294901760<t)return!1;for(var l=1;4>=l;l*=2){var y=s*(1+.2/l);y=Math.min(y,t+100663296);var A=Math;y=Math.max(t,y);e:{A=A.min.call(A,4294901760,y+(65536-y%65536)%65536)-K.buffer.byteLength+65535>>>16;try{K.grow(A),ye();var T=1;break e}catch{}T=void 0}if(T)return!0}return!1},O:Xr,P:Qr,H:ot,g:Zr,m:Kr,w:en,l:tn,a:K||o.wasmMemory,G:an,d:function(t,s,l,y){return an(t>>>0,s>>>0,l>>>0,y>>>0)}};(function(){function t(l,y){return l=l.exports,D=l=qa(l),B.Za.push(D.ya),ze=D.za,_e.unshift(D.V),N=y,rt(),l}var s={a:Va};if(Le(),o.instantiateWasm)try{return o.instantiateWasm(s,t)}catch(l){se("Module.instantiateWasm callback failed with error: "+l),h(l)}return Ot(s,function(l){t(l.instance,l.module)}).catch(h),{}})(),o._OrtInit=(t,s)=>(o._OrtInit=D.W)(t,s),o._OrtGetLastError=(t,s)=>(o._OrtGetLastError=D.X)(t,s),o._OrtCreateSessionOptions=(t,s,l,y,A,T,I,te,Ue,ie)=>(o._OrtCreateSessionOptions=D.Y)(t,s,l,y,A,T,I,te,Ue,ie),o._OrtAppendExecutionProvider=(t,s)=>(o._OrtAppendExecutionProvider=D.Z)(t,s),o._OrtAddFreeDimensionOverride=(t,s,l)=>(o._OrtAddFreeDimensionOverride=D._)(t,s,l),o._OrtAddSessionConfigEntry=(t,s,l)=>(o._OrtAddSessionConfigEntry=D.$)(t,s,l),o._OrtReleaseSessionOptions=t=>(o._OrtReleaseSessionOptions=D.aa)(t),o._OrtCreateSession=(t,s,l)=>(o._OrtCreateSession=D.ba)(t,s,l),o._OrtReleaseSession=t=>(o._OrtReleaseSession=D.ca)(t),o._OrtGetInputOutputCount=(t,s,l)=>(o._OrtGetInputOutputCount=D.da)(t,s,l),o._OrtGetInputName=(t,s)=>(o._OrtGetInputName=D.ea)(t,s),o._OrtGetOutputName=(t,s)=>(o._OrtGetOutputName=D.fa)(t,s),o._OrtFree=t=>(o._OrtFree=D.ga)(t),o._OrtCreateTensor=(t,s,l,y,A,T)=>(o._OrtCreateTensor=D.ha)(t,s,l,y,A,T),o._OrtGetTensorData=(t,s,l,y,A)=>(o._OrtGetTensorData=D.ia)(t,s,l,y,A),o._OrtReleaseTensor=t=>(o._OrtReleaseTensor=D.ja)(t),o._OrtCreateRunOptions=(t,s,l,y)=>(o._OrtCreateRunOptions=D.ka)(t,s,l,y),o._OrtAddRunConfigEntry=(t,s,l)=>(o._OrtAddRunConfigEntry=D.la)(t,s,l),o._OrtReleaseRunOptions=t=>(o._OrtReleaseRunOptions=D.ma)(t),o._OrtCreateBinding=t=>(o._OrtCreateBinding=D.na)(t),o._OrtBindInput=(t,s,l)=>(o._OrtBindInput=D.oa)(t,s,l),o._OrtBindOutput=(t,s,l,y)=>(o._OrtBindOutput=D.pa)(t,s,l,y),o._OrtClearBoundOutputs=t=>(o._OrtClearBoundOutputs=D.qa)(t),o._OrtReleaseBinding=t=>(o._OrtReleaseBinding=D.ra)(t),o._OrtRunWithBinding=(t,s,l,y,A)=>(o._OrtRunWithBinding=D.sa)(t,s,l,y,A),o._OrtRun=(t,s,l,y,A,T,I,te)=>(o._OrtRun=D.ta)(t,s,l,y,A,T,I,te),o._OrtEndProfiling=t=>(o._OrtEndProfiling=D.ua)(t);var Lt=o._pthread_self=()=>(Lt=o._pthread_self=D.va)(),on=o._malloc=t=>(on=o._malloc=D.wa)(t);o._free=t=>(o._free=D.xa)(t),o.__emscripten_tls_init=()=>(o.__emscripten_tls_init=D.ya)();var sn=o.__emscripten_thread_init=(t,s,l,y,A,T)=>(sn=o.__emscripten_thread_init=D.Aa)(t,s,l,y,A,T);o.__emscripten_thread_crashed=()=>(o.__emscripten_thread_crashed=D.Ba)();var un=(t,s,l,y)=>(un=D.Ca)(t,s,l,y),pr=t=>(pr=D.Da)(t),mr=o.__emscripten_thread_exit=t=>(mr=o.__emscripten_thread_exit=D.Ea)(t),fn=o.__emscripten_check_mailbox=()=>(fn=o.__emscripten_check_mailbox=D.Fa)(),ln=t=>(ln=D.Ga)(t),cn=(t,s)=>(cn=D.Ha)(t,s),hr=()=>(hr=D.Ia)(),Nt=t=>(Nt=D.Ja)(t),gr=t=>(gr=D.Ka)(t);function qa(t){t=Object.assign({},t);var s=y=>()=>y()>>>0,l=y=>A=>y(A)>>>0;return t.__errno_location=s(t.__errno_location),t.pthread_self=s(t.pthread_self),t.malloc=l(t.malloc),t.stackSave=s(t.stackSave),t.stackAlloc=l(t.stackAlloc),t}o.keepRuntimeAlive=ae,o.wasmMemory=K,o.stackAlloc=gr,o.stackSave=hr,o.stackRestore=Nt,o.UTF8ToString=at,o.stringToUTF8=ue,o.lengthBytesUTF8=ne,o.ExitStatus=je,o.PThread=B;var Ht;Se=function t(){Ht||dn(),Ht||(Se=t)};function dn(){function t(){if(!Ht&&(Ht=!0,o.calledRun=!0,!ge)&&(E||it(_e),m(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),!E)){if(o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var s=o.postRun.shift();xe.unshift(s)}it(xe)}}if(!(0<X))if(E)m(o),E||it(_e),startWorker(o);else{if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Ee.unshift(o.preRun.shift());it(Ee),0<X||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),t()},1)):t())}}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return dn(),r.ready}})();typeof na=="object"&&typeof Mr=="object"?Mr.exports=ra:typeof define=="function"&&define.amd&&define([],()=>ra)});var oa=ut((vi,oo)=>{oo.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>(0,eval)(fs.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason??e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err("worker.js received unknown command "+e.data.cmd),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed&&Module.__emscripten_thread_crashed(),a}}self.onmessage=handleMessage;\n'});var sa,io,Rr,Cr,qt,ia,so,uo,fo,ua,G,Ze=W(()=>{"use strict";sa=Qn();io=aa(),Cr=!1,qt=!1,ia=!1,so=n=>{if(n===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+n+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+n+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},uo=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fo=(n,r)=>n?"ort-training-wasm-simd.wasm":r?"ort-wasm-threaded.wasm":"ort-wasm.wasm",ua=async n=>{if(Cr)return Promise.resolve();if(qt)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(ia)throw new Error("previous call to 'initializeWebAssembly()' failed.");qt=!0;let r=n.initTimeout,e=n.numThreads,u=n.simd,a=so(e),d=u&&uo(),f=n.wasmPaths,o=typeof f=="string"?f:void 0,m=fo(d,a),h=typeof f=="object"?f[m]:void 0,g=!1,b=[];if(r>0&&b.push(new Promise(w=>{setTimeout(()=>{g=!0,w()},r)})),b.push(new Promise((w,M)=>{let C=a?io:sa,S={locateFile:(E,F)=>a&&E.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([oa()],{type:"text/javascript"})):E.endsWith(".wasm")?h||(o??F)+m:F+E};if(a)if(S.numThreads=e,typeof Blob>"u")S.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let E=`var ortWasmThreaded=${C.toString()};`;S.mainScriptUrlOrBlob=new Blob([E],{type:"text/javascript"})}C(S).then(E=>{qt=!1,Cr=!0,Rr=E,w()},E=>{qt=!1,ia=!0,M(E)})})),await Promise.race(b),g)throw new Error(`WebAssembly backend initializing failed due to timeout: ${r}ms`)},G=()=>{if(Cr&&Rr)return Rr;throw new Error("WebAssembly is not initialized yet.")}});var Z,Rt,q,Ct=W(()=>{"use strict";Ze();Z=(n,r)=>{let e=G(),u=e.lengthBytesUTF8(n)+1,a=e._malloc(u);return e.stringToUTF8(n,a,u),r.push(a),a},Rt=(n,r,e,u)=>{if(typeof n=="object"&&n!==null){if(e.has(n))throw new Error("Circular reference in options");e.add(n)}Object.entries(n).forEach(([a,d])=>{let f=r?r+a:a;if(typeof d=="object")Rt(d,f+".",e,u);else if(typeof d=="string"||typeof d=="number")u(f,d.toString());else if(typeof d=="boolean")u(f,d?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof d}`)})},q=n=>{let r=G(),e=r.stackSave();try{let u=r.stackAlloc(8);r._OrtGetLastError(u,u+4);let a=r.HEAP32[u/4],d=r.HEAPU32[u/4+1],f=d?r.UTF8ToString(d):"";throw new Error(`${n} ERROR_CODE: ${a}, ERROR_MESSAGE: ${f}`)}finally{r.stackRestore(e)}}});var ct,Pr=W(()=>{"use strict";Ze();Ct();ct=n=>{let r=G(),e=0,u=[],a=n||{};try{if(n?.logSeverityLevel===void 0)a.logSeverityLevel=2;else if(typeof n.logSeverityLevel!="number"||!Number.isInteger(n.logSeverityLevel)||n.logSeverityLevel<0||n.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${n.logSeverityLevel}`);if(n?.logVerbosityLevel===void 0)a.logVerbosityLevel=0;else if(typeof n.logVerbosityLevel!="number"||!Number.isInteger(n.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${n.logVerbosityLevel}`);n?.terminate===void 0&&(a.terminate=!1);let d=0;return n?.tag!==void 0&&(d=Z(n.tag,u)),e=r._OrtCreateRunOptions(a.logSeverityLevel,a.logVerbosityLevel,!!a.terminate,d),e===0&&q("Can't create run options."),n?.extra!==void 0&&Rt(n.extra,"",new WeakSet,(f,o)=>{let m=Z(f,u),h=Z(o,u);r._OrtAddRunConfigEntry(e,m,h)!==0&&q(`Can't set a run config entry: ${f} - ${o}.`)}),[e,u]}catch(d){throw e!==0&&r._OrtReleaseRunOptions(e),u.forEach(f=>r._free(f)),d}}});var lo,co,po,mo,Jt,Ir=W(()=>{"use strict";Ze();Ct();lo=n=>{switch(n){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${n}`)}},co=n=>{switch(n){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${n}`)}},po=n=>{n.extra||(n.extra={}),n.extra.session||(n.extra.session={});let r=n.extra.session;r.use_ort_model_bytes_directly||(r.use_ort_model_bytes_directly="1"),n.executionProviders&&n.executionProviders.some(e=>(typeof e=="string"?e:e.name)==="webgpu")&&(n.enableMemPattern=!1)},mo=(n,r,e)=>{for(let u of r){let a=typeof u=="string"?u:u.name;switch(a){case"webnn":if(a="WEBNN",typeof u!="string"){let f=u;if(f?.deviceType){let o=Z("deviceType",e),m=Z(f.deviceType,e);G()._OrtAddSessionConfigEntry(n,o,m)!==0&&q(`Can't set a session config entry: 'deviceType' - ${f.deviceType}.`)}if(f?.numThreads){let o=f.numThreads;(typeof o!="number"||!Number.isInteger(o)||o<0)&&(o=0);let m=Z("numThreads",e),h=Z(o.toString(),e);G()._OrtAddSessionConfigEntry(n,m,h)!==0&&q(`Can't set a session config entry: 'numThreads' - ${f.numThreads}.`)}if(f?.powerPreference){let o=Z("powerPreference",e),m=Z(f.powerPreference,e);G()._OrtAddSessionConfigEntry(n,o,m)!==0&&q(`Can't set a session config entry: 'powerPreference' - ${f.powerPreference}.`)}}break;case"webgpu":if(a="JS",typeof u!="string"){let f=u;if(f?.preferredLayout){if(f.preferredLayout!=="NCHW"&&f.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${f.preferredLayout}`);let o=Z("preferredLayout",e),m=Z(f.preferredLayout,e);G()._OrtAddSessionConfigEntry(n,o,m)!==0&&q(`Can't set a session config entry: 'preferredLayout' - ${f.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${a}`)}let d=Z(a,e);G()._OrtAppendExecutionProvider(n,d)!==0&&q(`Can't append execution provider: ${a}.`)}},Jt=n=>{let r=G(),e=0,u=[],a=n||{};po(a);try{let d=lo(a.graphOptimizationLevel??"all"),f=co(a.executionMode??"sequential"),o=typeof a.logId=="string"?Z(a.logId,u):0,m=a.logSeverityLevel??2;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log serverity level is not valid: ${m}`);let h=a.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let g=typeof a.optimizedModelFilePath=="string"?Z(a.optimizedModelFilePath,u):0;if(e=r._OrtCreateSessionOptions(d,!!a.enableCpuMemArena,!!a.enableMemPattern,f,!!a.enableProfiling,0,o,m,h,g),e===0&&q("Can't create session options."),a.executionProviders&&mo(e,a.executionProviders,u),a.enableGraphCapture!==void 0){if(typeof a.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${a.enableGraphCapture}`);let b=Z("enableGraphCapture",u),w=Z(a.enableGraphCapture.toString(),u);r._OrtAddSessionConfigEntry(e,b,w)!==0&&q(`Can't set a session config entry: 'enableGraphCapture' - ${a.enableGraphCapture}.`)}if(a.freeDimensionOverrides)for(let[b,w]of Object.entries(a.freeDimensionOverrides)){if(typeof b!="string")throw new Error(`free dimension override name must be a string: ${b}`);if(typeof w!="number"||!Number.isInteger(w)||w<0)throw new Error(`free dimension override value must be a non-negative integer: ${w}`);let M=Z(b,u);r._OrtAddFreeDimensionOverride(e,M,w)!==0&&q(`Can't set a free dimension override: ${b} - ${w}.`)}return a.extra!==void 0&&Rt(a.extra,"",new WeakSet,(b,w)=>{let M=Z(b,u),C=Z(w,u);r._OrtAddSessionConfigEntry(e,M,C)!==0&&q(`Can't set a session config entry: ${b} - ${w}.`)}),[e,u]}catch(d){throw e!==0&&r._OrtReleaseSessionOptions(e),u.forEach(f=>r._free(f)),d}}});var dt,Xt,xr,Pt,fa,Qt,It,Zt=W(()=>{"use strict";dt=n=>{switch(n){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${n}`)}},Xt=n=>{switch(n){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${n}`)}},xr=n=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][n],Pt=n=>{switch(n){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${n}`)}},fa=n=>{switch(n){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${n}`)}},Qt=n=>n==="float32"||n==="float16"||n==="int32"||n==="int64"||n==="uint32"||n==="uint8"||n==="bool",It=n=>{switch(n){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${n}`)}}});var xt,Dr=W(()=>{"use strict";xt=async n=>{if(typeof n=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(n))}catch(r){if(r.code==="ERR_FS_FILE_TOO_LARGE"){let e=(void 0)(n),u=[];for await(let a of e)u.push(a);return new Uint8Array(Buffer.concat(u))}throw r}else{let r=await fetch(n);if(!r.ok)throw new Error(`failed to load external data file: ${n}`);let e=r.headers.get("Content-Length"),u=e?parseInt(e,10):0;if(u<1073741824)return new Uint8Array(await r.arrayBuffer());{if(!r.body)throw new Error(`failed to load external data file: ${n}, no response body.`);let a=r.body.getReader(),d;try{d=new ArrayBuffer(u)}catch(o){if(o instanceof RangeError){let m=Math.ceil(u/65536);d=new WebAssembly.Memory({initial:m,maximum:m}).buffer}else throw o}let f=0;for(;;){let{done:o,value:m}=await a.read();if(o)break;let h=m.byteLength;new Uint8Array(d,f,h).set(m),f+=h}return new Uint8Array(d,0,u)}}else return n instanceof Blob?new Uint8Array(await n.arrayBuffer()):n instanceof Uint8Array?n:new Uint8Array(n)}});var ho,la,ca,pt,go,Dt,da,pa,Kt,ma,ha,ga,er=W(()=>{"use strict";Pr();Ir();Zt();Ze();Ct();Dr();ho=(n,r)=>{G()._OrtInit(n,r)!==0&&q("Can't initialize onnxruntime.")},la=async n=>{ho(n.wasm.numThreads,fa(n.logLevel))},ca=async(n,r)=>{},pt=new Map,go=n=>{let r=G(),e=r.stackSave();try{let u=r.stackAlloc(8);return r._OrtGetInputOutputCount(n,u,u+4)!==0&&q("Can't get session input/output count."),[r.HEAP32[u/4],r.HEAP32[u/4+1]]}finally{r.stackRestore(e)}},Dt=n=>{let r=G(),e=r._malloc(n.byteLength);if(e===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${n.byteLength}.`);return r.HEAPU8.set(n,e),[e,n.byteLength]},da=async(n,r)=>{let e,u,a=G();Array.isArray(n)?[e,u]=n:n.buffer===a.HEAPU8.buffer?[e,u]=[n.byteOffset,n.byteLength]:[e,u]=Dt(n);let d=0,f=0,o=0,m=[],h=[],g=[];try{if([f,m]=Jt(r),r?.externalData&&a.mountExternalData){let L=[];for(let k of r.externalData){let z=typeof k=="string"?k:k.path;L.push(xt(typeof k=="string"?k:k.data).then(P=>{a.mountExternalData(z,P)}))}await Promise.all(L)}d=await a._OrtCreateSession(e,u,f),d===0&&q("Can't create a session.");let[b,w]=go(d),M=!!r?.enableGraphCapture,C=[],S=[],E=[];for(let L=0;L<b;L++){let k=a._OrtGetInputName(d,L);k===0&&q("Can't get an input name."),h.push(k),C.push(a.UTF8ToString(k))}for(let L=0;L<w;L++){let k=a._OrtGetOutputName(d,L);k===0&&q("Can't get an output name."),g.push(k);let z=a.UTF8ToString(k);S.push(z)}let F=null;return pt.set(d,[d,h,g,F,M,!1]),[d,C,S]}catch(b){throw h.forEach(w=>a._OrtFree(w)),g.forEach(w=>a._OrtFree(w)),o!==0&&a._OrtReleaseBinding(o),d!==0&&a._OrtReleaseSession(d),b}finally{a._free(e),f!==0&&a._OrtReleaseSessionOptions(f),m.forEach(b=>a._free(b)),a.unmountExternalData?.()}},pa=n=>{let r=G(),e=pt.get(n);if(!e)throw new Error(`cannot release session. invalid session id: ${n}`);let[u,a,d,f,o]=e;f&&(o&&r._OrtClearBoundOutputs(f.handle),r._OrtReleaseBinding(f.handle)),r.jsepOnReleaseSession?.(n),a.forEach(m=>r._OrtFree(m)),d.forEach(m=>r._OrtFree(m)),r._OrtReleaseSession(u),pt.delete(n)},Kt=(n,r,e,u,a,d=!1)=>{if(!n){r.push(0);return}let f=G(),o=n[0],m=n[1],h=n[3],g,b;if(o==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(d&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${a} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let C=n[2].gpuBuffer,S=xr(dt(o));b=m.reduce((F,L)=>F*L,1)*S;let E=f.jsepRegisterBuffer;if(!E)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');g=E(u,a,C,b)}else{let C=n[2];if(Array.isArray(C)){b=4*C.length,g=f._malloc(b),e.push(g);let S=g/4;for(let E=0;E<C.length;E++){if(typeof C[E]!="string")throw new TypeError(`tensor data at index ${E} is not a string`);f.HEAPU32[S++]=Z(C[E],e)}}else b=C.byteLength,g=f._malloc(b),e.push(g),f.HEAPU8.set(new Uint8Array(C.buffer,C.byteOffset,b),g)}let w=f.stackSave(),M=f.stackAlloc(4*m.length);try{let C=M/4;m.forEach(E=>f.HEAP32[C++]=E);let S=f._OrtCreateTensor(dt(o),g,b,M,m.length,It(h));S===0&&q(`Can't create tensor for input/output. session=${u}, index=${a}.`),r.push(S)}finally{f.stackRestore(w)}},ma=async(n,r,e,u,a,d)=>{let f=G(),o=pt.get(n);if(!o)throw new Error(`cannot run inference. invalid session id: ${n}`);let m=o[0],h=o[1],g=o[2],b=o[3],w=o[4],M=o[5],C=r.length,S=u.length,E=0,F=[],L=[],k=[],z=[],P=f.stackSave(),Oe=f.stackAlloc(C*4),ve=f.stackAlloc(C*4),he=f.stackAlloc(S*4),U=f.stackAlloc(S*4);try{[E,F]=ct(d);for(let N=0;N<C;N++)Kt(e[N],L,z,n,r[N],w);for(let N=0;N<S;N++)Kt(a[N],k,z,n,C+u[N],w);let Y=Oe/4,se=ve/4,Ce=he/4,Ge=U/4;for(let N=0;N<C;N++)f.HEAPU32[Y++]=L[N],f.HEAPU32[se++]=h[r[N]];for(let N=0;N<S;N++)f.HEAPU32[Ce++]=k[N],f.HEAPU32[Ge++]=g[u[N]];f.jsepOnRunStart?.(m);let K;K=await f._OrtRun(m,ve,Oe,C,U,S,he,E),K!==0&&q("failed to call OrtRun().");let D=[];for(let N=0;N<S;N++){let ge=f.HEAPU32[he/4+N];if(ge===k[N]){D.push(a[N]);continue}let ce=f.stackSave(),oe=f.stackAlloc(4*4),Pe=!1,ee,de=0;try{f._OrtGetTensorData(ge,oe,oe+4,oe+8,oe+12)!==0&&q(`Can't access output tensor data on index ${N}.`);let ye=oe/4,Ie=f.HEAPU32[ye++];de=f.HEAPU32[ye++];let ze=f.HEAPU32[ye++],Ee=f.HEAPU32[ye++],_e=[];for(let ae=0;ae<Ee;ae++)_e.push(f.HEAPU32[ze/4+ae]);f._OrtFree(ze);let xe=_e.reduce((ae,X)=>ae*X,1);ee=Xt(Ie);let ke=b?.outputPreferredLocations[u[N]];if(ee==="string"){if(ke==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let ae=[],X=de/4;for(let Te=0;Te<xe;Te++){let Se=f.HEAPU32[X++],Le=Te===xe-1?void 0:f.HEAPU32[X]-Se;ae.push(f.UTF8ToString(Se,Le))}D.push([ee,_e,ae,"cpu"])}else if(ke==="gpu-buffer"&&xe>0){let ae=f.jsepGetBuffer;if(!ae)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let X=ae(de),Te=xr(Ie);if(Te===void 0||!Qt(ee))throw new Error(`Unsupported data type: ${ee}`);Pe=!0,D.push([ee,_e,{gpuBuffer:X,download:f.jsepCreateDownloader(X,xe*Te,ee),dispose:()=>{f._OrtReleaseTensor(ge)}},"gpu-buffer"])}else{let ae=Pt(ee),X=new ae(xe);new Uint8Array(X.buffer,X.byteOffset,X.byteLength).set(f.HEAPU8.subarray(de,de+X.byteLength)),D.push([ee,_e,X,"cpu"])}}finally{f.stackRestore(ce),ee==="string"&&de&&f._free(de),Pe||f._OrtReleaseTensor(ge)}}return b&&!w&&(f._OrtClearBoundOutputs(b.handle),pt.set(n,[m,h,g,b,w,!1])),D}finally{f.stackRestore(P),L.forEach(Y=>f._OrtReleaseTensor(Y)),k.forEach(Y=>f._OrtReleaseTensor(Y)),z.forEach(Y=>f._free(Y)),E!==0&&f._OrtReleaseRunOptions(E),F.forEach(Y=>f._free(Y))}},ha=n=>{let r=G(),e=pt.get(n);if(!e)throw new Error("invalid session id");let u=e[0],a=r._OrtEndProfiling(u);a===0&&q("Can't get an profile file name."),r._OrtFree(a)},ga=n=>{let r=[];for(let e of n){let u=e[2];!Array.isArray(u)&&"buffer"in u&&r.push(u.buffer)}return r}});var ya=ut((Wi,wo)=>{wo.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var Vr=Object.getOwnPropertyDescriptor;var Jr=Object.getOwnPropertyNames;var Xr=Object.prototype.hasOwnProperty;var _t=(u,d)=>()=>(u&&(d=u(u=0)),d);var nt=(u,d)=>()=>(d||u((d={exports:{}}).exports,d),d.exports),Et=(u,d)=>{for(var n in d)vt(u,n,{get:d[n],enumerable:!0})},Qr=(u,d,n,h)=>{if(d&&typeof d=="object"||typeof d=="function")for(let f of Jr(d))!Xr.call(u,f)&&f!==n&&vt(u,f,{get:()=>d[f],enumerable:!(h=Vr(d,f))||h.enumerable});return u};var at=u=>Qr(vt({},"__esModule",{value:!0}),u);var St={};Et(St,{createReadStream:()=>fr,readFile:()=>Zr,readFileSync:()=>Kr});var Zr,Kr,fr,Tt=_t(()=>{Zr=void 0,Kr=void 0,fr=void 0});var At={};Et(At,{join:()=>en});var en,Mt=_t(()=>{en=void 0});var dr=nt((cr,Ct)=>{"use strict";var lr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){var n=d,h,f;n.ready=new Promise((t,o)=>{h=t,f=o});var w=Object.assign({},n),g="./this.program",i=typeof window=="object",T=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",x="",R,D,ee;if(I){var U=(Tt(),at(St)),L=(Mt(),at(At));x=T?L.dirname(x)+"/":__dirname+"/",R=(t,o)=>(t=t.startsWith("file://")?new URL(t):L.normalize(t),U.readFileSync(t,o?void 0:"utf8")),ee=t=>(t=R(t,!0),t.buffer||(t=new Uint8Array(t)),t),D=(t,o,s,c=!0)=>{t=t.startsWith("file://")?new URL(t):L.normalize(t),U.readFile(t,c?void 0:"utf8",(O,S)=>{O?s(O):o(c?S.buffer:S)})},!n.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),n.inspect=()=>"[Emscripten Module object]"}else(i||T)&&(T?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),u&&(x=u),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},T&&(ee=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),D=(t,o,s)=>{var c=new XMLHttpRequest;c.open("GET",t,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?o(c.response):s()},c.onerror=s,c.send(null)});var v=n.print||console.log.bind(console),k=n.printErr||console.error.bind(console);Object.assign(n,w),w=null,n.thisProgram&&(g=n.thisProgram);var W;n.wasmBinary&&(W=n.wasmBinary);var z=n.noExitRuntime||!0;typeof WebAssembly!="object"&&re("no native wasm support detected");var ae,E,ve=!1,Oe,ce,M,N;function oe(){var t=ae.buffer;n.HEAP8=Oe=new Int8Array(t),n.HEAP16=new Int16Array(t),n.HEAP32=M=new Int32Array(t),n.HEAPU8=ce=new Uint8Array(t),n.HEAPU16=new Uint16Array(t),n.HEAPU32=N=new Uint32Array(t),n.HEAPF32=new Float32Array(t),n.HEAPF64=new Float64Array(t)}var _e=[],Pe=[],V=[];function A(){var t=n.preRun.shift();_e.unshift(t)}var F=0,de=null,ue=null;function re(t){throw n.onAbort&&n.onAbort(t),t="Aborted("+t+")",k(t),ve=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}function Ee(t){return t.startsWith("data:application/octet-stream;base64,")}var J;if(J="ort-training-wasm-simd.wasm",!Ee(J)){var fe=J;J=n.locateFile?n.locateFile(fe,x):x+fe}function ke(t){if(t==J&&W)return new Uint8Array(W);if(ee)return ee(t);throw"both async and sync fetching of the wasm failed"}function pe(t){if(!W&&(i||T)){if(typeof fetch=="function"&&!t.startsWith("file://"))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+t+"\'";return o.arrayBuffer()}).catch(()=>ke(t));if(D)return new Promise((o,s)=>{D(t,c=>o(new Uint8Array(c)),s)})}return Promise.resolve().then(()=>ke(t))}function Se(t,o,s){return pe(t).then(c=>WebAssembly.instantiate(c,o)).then(c=>c).then(s,c=>{k("failed to asynchronously prepare wasm: "+c),re(c)})}function Ie(t,o){var s=J;return W||typeof WebAssembly.instantiateStreaming!="function"||Ee(s)||s.startsWith("file://")||I||typeof fetch!="function"?Se(s,t,o):fetch(s,{credentials:"same-origin"}).then(c=>WebAssembly.instantiateStreaming(c,t).then(o,function(O){return k("wasm streaming compile failed: "+O),k("falling back to ArrayBuffer instantiation"),Se(s,t,o)}))}var ye,ge=t=>{for(;0<t.length;)t.shift()(n)};function Te(t){this.Ja=t-24,this.Na=function(o){N[this.Ja+4>>2>>>0]=o},this.Ma=function(o){N[this.Ja+8>>2>>>0]=o},this.Ka=function(o,s){this.La(),this.Na(o),this.Ma(s)},this.La=function(){N[this.Ja+16>>2>>>0]=0}}var Re=0,te=0,j=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,he=(t,o,s)=>{o>>>=0;var c=o+s;for(s=o;t[s]&&!(s>=c);)++s;if(16<s-o&&t.buffer&&j)return j.decode(t.subarray(o,s));for(c="";o<s;){var O=t[o++];if(O&128){var S=t[o++]&63;if((O&224)==192)c+=String.fromCharCode((O&31)<<6|S);else{var P=t[o++]&63;O=(O&240)==224?(O&15)<<12|S<<6|P:(O&7)<<18|S<<12|P<<6|t[o++]&63,65536>O?c+=String.fromCharCode(O):(O-=65536,c+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else c+=String.fromCharCode(O)}return c},be=(t,o)=>(t>>>=0)?he(ce,t,o):"",De=t=>{for(var o=0,s=0;s<t.length;++s){var c=t.charCodeAt(s);127>=c?o++:2047>=c?o+=2:55296<=c&&57343>=c?(o+=4,++s):o+=3}return o},We=(t,o,s,c)=>{if(s>>>=0,!(0<c))return 0;var O=s;c=s+c-1;for(var S=0;S<t.length;++S){var P=t.charCodeAt(S);if(55296<=P&&57343>=P){var Z=t.charCodeAt(++S);P=65536+((P&1023)<<10)|Z&1023}if(127>=P){if(s>=c)break;o[s++>>>0]=P}else{if(2047>=P){if(s+1>=c)break;o[s++>>>0]=192|P>>6}else{if(65535>=P){if(s+2>=c)break;o[s++>>>0]=224|P>>12}else{if(s+3>=c)break;o[s++>>>0]=240|P>>18,o[s++>>>0]=128|P>>12&63}o[s++>>>0]=128|P>>6&63}o[s++>>>0]=128|P&63}}return o[s>>>0]=0,s-O},we=t=>t%4===0&&(t%100!==0||t%400===0),$e=[0,31,60,91,121,152,182,213,244,274,305,335],Ce=[0,31,59,90,120,151,181,212,243,273,304,334],qe=t=>{var o=De(t)+1,s=Ze(o);return s&&We(t,ce,s,o),s},Ve={},Je=()=>{if(!Xe){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},o;for(o in Ve)Ve[o]===void 0?delete t[o]:t[o]=Ve[o];var s=[];for(o in t)s.push(`${o}=${t[o]}`);Xe=s}return Xe},Xe,Fe=[null,[],[]],xe=[31,29,31,30,31,30,31,31,30,31,30,31],Ne=[31,28,31,30,31,30,31,31,30,31,30,31];function it(t){var o=Array(De(t)+1);return We(t,o,0,o.length),o}function Qe(t,o,s,c){function O(p,B,G){for(p=typeof p=="number"?p.toString():p||"";p.length<B;)p=G[0]+p;return p}function S(p,B){return O(p,B,"0")}function P(p,B){function G(rt){return 0>rt?-1:0<rt?1:0}var Ae;return(Ae=G(p.getFullYear()-B.getFullYear()))===0&&(Ae=G(p.getMonth()-B.getMonth()))===0&&(Ae=G(p.getDate()-B.getDate())),Ae}function Z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function le(p){var B=p.Ea;for(p=new Date(new Date(p.Fa+1900,0,1).getTime());0<B;){var G=p.getMonth(),Ae=(we(p.getFullYear())?xe:Ne)[G];if(B>Ae-p.getDate())B-=Ae-p.getDate()+1,p.setDate(1),11>G?p.setMonth(G+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+B);break}}return G=new Date(p.getFullYear()+1,0,4),B=Z(new Date(p.getFullYear(),0,4)),G=Z(G),0>=P(B,p)?0>=P(G,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}t>>>=0,o>>>=0,s>>>=0,c>>>=0;var ie=M[c+40>>2>>>0];c={Qa:M[c>>2>>>0],Pa:M[c+4>>2>>>0],Ga:M[c+8>>2>>>0],Ia:M[c+12>>2>>>0],Ha:M[c+16>>2>>>0],Fa:M[c+20>>2>>>0],za:M[c+24>>2>>>0],Ea:M[c+28>>2>>>0],Sa:M[c+32>>2>>>0],Oa:M[c+36>>2>>>0],Ra:ie?be(ie):""},s=be(s),ie={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in ie)s=s.replace(new RegExp(se,"g"),ie[se]);var et="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),tt="January February March April May June July August September October November December".split(" ");ie={"%a":p=>et[p.za].substring(0,3),"%A":p=>et[p.za],"%b":p=>tt[p.Ha].substring(0,3),"%B":p=>tt[p.Ha],"%C":p=>S((p.Fa+1900)/100|0,2),"%d":p=>S(p.Ia,2),"%e":p=>O(p.Ia,2," "),"%g":p=>le(p).toString().substring(2),"%G":p=>le(p),"%H":p=>S(p.Ga,2),"%I":p=>(p=p.Ga,p==0?p=12:12<p&&(p-=12),S(p,2)),"%j":p=>{for(var B=0,G=0;G<=p.Ha-1;B+=(we(p.Fa+1900)?xe:Ne)[G++]);return S(p.Ia+B,3)},"%m":p=>S(p.Ha+1,2),"%M":p=>S(p.Pa,2),"%n":()=>`\n`,"%p":p=>0<=p.Ga&&12>p.Ga?"AM":"PM","%S":p=>S(p.Qa,2),"%t":()=>"	","%u":p=>p.za||7,"%U":p=>S(Math.floor((p.Ea+7-p.za)/7),2),"%V":p=>{var B=Math.floor((p.Ea+7-(p.za+6)%7)/7);if(2>=(p.za+371-p.Ea-2)%7&&B++,B)B==53&&(G=(p.za+371-p.Ea)%7,G==4||G==3&&we(p.Fa)||(B=1));else{B=52;var G=(p.za+7-p.Ea-1)%7;(G==4||G==5&&we(p.Fa%400-1))&&B++}return S(B,2)},"%w":p=>p.za,"%W":p=>S(Math.floor((p.Ea+7-(p.za+6)%7)/7),2),"%y":p=>(p.Fa+1900).toString().substring(2),"%Y":p=>p.Fa+1900,"%z":p=>{p=p.Oa;var B=0<=p;return p=Math.abs(p)/60,(B?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.Ra,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(se in ie)s.includes(se)&&(s=s.replace(new RegExp(se,"g"),ie[se](c)));return s=s.replace(/\\0\\0/g,"%"),se=it(s),se.length>o?0:(Oe.set(se,t>>>0),se.length-1)}var st={a:function(t,o,s){throw t>>>=0,new Te(t).Ka(o>>>0,s>>>0),Re=t,te++,Re},e:function(){return 0},H:function(){},x:function(){},z:function(){},k:function(){return 0},F:function(){},B:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},l:()=>!0,o:function(t,o,s){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,s>>>=0,t=new Date(1e3*t),M[s>>2>>>0]=t.getUTCSeconds(),M[s+4>>2>>>0]=t.getUTCMinutes(),M[s+8>>2>>>0]=t.getUTCHours(),M[s+12>>2>>>0]=t.getUTCDate(),M[s+16>>2>>>0]=t.getUTCMonth(),M[s+20>>2>>>0]=t.getUTCFullYear()-1900,M[s+24>>2>>>0]=t.getUTCDay(),M[s+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},p:function(t,o,s){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,s>>>=0,t=new Date(1e3*t),M[s>>2>>>0]=t.getSeconds(),M[s+4>>2>>>0]=t.getMinutes(),M[s+8>>2>>>0]=t.getHours(),M[s+12>>2>>>0]=t.getDate(),M[s+16>>2>>>0]=t.getMonth(),M[s+20>>2>>>0]=t.getFullYear()-1900,M[s+24>>2>>>0]=t.getDay(),M[s+28>>2>>>0]=(we(t.getFullYear())?$e:Ce)[t.getMonth()]+t.getDate()-1|0,M[s+36>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var c=new Date(t.getFullYear(),0,1).getTimezoneOffset();M[s+32>>2>>>0]=(o!=c&&t.getTimezoneOffset()==Math.min(c,o))|0},q:function(t){t>>>=0;var o=new Date(M[t+20>>2>>>0]+1900,M[t+16>>2>>>0],M[t+12>>2>>>0],M[t+8>>2>>>0],M[t+4>>2>>>0],M[t>>2>>>0],0),s=M[t+32>>2>>>0],c=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),S=new Date(o.getFullYear(),0,1).getTimezoneOffset(),P=Math.min(S,O);return 0>s?M[t+32>>2>>>0]=+(O!=S&&P==c):0<s!=(P==c)&&(O=Math.max(S,O),o.setTime(o.getTime()+6e4*((0<s?P:O)-c))),M[t+24>>2>>>0]=o.getDay(),M[t+28>>2>>>0]=(we(o.getFullYear())?$e:Ce)[o.getMonth()]+o.getDate()-1|0,M[t>>2>>>0]=o.getSeconds(),M[t+4>>2>>>0]=o.getMinutes(),M[t+8>>2>>>0]=o.getHours(),M[t+12>>2>>>0]=o.getDate(),M[t+16>>2>>>0]=o.getMonth(),M[t+20>>2>>>0]=o.getYear(),t=o.getTime()/1e3,He((ye=t,1<=+Math.abs(ye)?0<ye?+Math.floor(ye/4294967296)>>>0:~~+Math.ceil((ye-+(~~ye>>>0))/4294967296)>>>0:0)),t>>>0},m:function(){return-52},n:function(){},t:function(t,o,s){function c(le){return(le=le.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?le[1]:"GMT"}s>>>=0;var O=new Date().getFullYear(),S=new Date(O,0,1),P=new Date(O,6,1);O=S.getTimezoneOffset();var Z=P.getTimezoneOffset();N[t>>>0>>2>>>0]=60*Math.max(O,Z),M[o>>>0>>2>>>0]=+(O!=Z),t=c(S),o=c(P),t=qe(t),o=qe(o),Z<O?(N[s>>2>>>0]=t,N[s+4>>2>>>0]=o):(N[s>>2>>>0]=o,N[s+4>>2>>>0]=t)},d:()=>{re("")},h:function(){return Date.now()},u:function(){return 4294901760},b:()=>performance.now(),I:function(t,o,s){return o>>>=0,ce.copyWithin(t>>>0>>>0,o>>>0,o+(s>>>0)>>>0)},s:function(t){t>>>=0;var o=ce.length;if(4294901760<t)return!1;for(var s=1;4>=s;s*=2){var c=o*(1+.2/s);c=Math.min(c,t+100663296);var O=Math;c=Math.max(t,c);e:{O=O.min.call(O,4294901760,c+(65536-c%65536)%65536)-ae.buffer.byteLength+65535>>>16;try{ae.grow(O),oe();var S=1;break e}catch{}S=void 0}if(S)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var s=0;return Je().forEach(function(c,O){var S=o+s;for(O=N[t+4*O>>2>>>0]=S,S=0;S<c.length;++S)Oe[O++>>0>>>0]=c.charCodeAt(S);Oe[O>>0>>>0]=0,s+=c.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var s=Je();N[t>>2>>>0]=s.length;var c=0;return s.forEach(function(O){c+=O.length+1}),N[o>>2>>>0]=c,0},f:()=>52,j:function(){return 52},r:function(){return 70},i:function(t,o,s,c){o>>>=0,s>>>=0,c>>>=0;for(var O=0,S=0;S<s;S++){var P=N[o>>2>>>0],Z=N[o+4>>2>>>0];o+=8;for(var le=0;le<Z;le++){var ie=ce[P+le>>>0],se=Fe[t];ie===0||ie===10?((t===1?v:k)(he(se,0)),se.length=0):se.push(ie)}O+=Z}return N[c>>2>>>0]=O,0},A:Qe,c:function(t,o,s,c){return Qe(t>>>0,o>>>0,s>>>0,c>>>0)}};(function(){function t(s){if(s=s.exports,E=s=ze(s),ae=E.J,oe(),Pe.unshift(E.K),F--,n.monitorRunDependencies&&n.monitorRunDependencies(F),F==0&&(de!==null&&(clearInterval(de),de=null),ue)){var c=ue;ue=null,c()}return s}var o={a:st};if(F++,n.monitorRunDependencies&&n.monitorRunDependencies(F),n.instantiateWasm)try{return n.instantiateWasm(o,t)}catch(s){k("Module.instantiateWasm callback failed with error: "+s),f(s)}return Ie(o,function(s){t(s.instance)}).catch(f),{}})(),n._OrtInit=(t,o)=>(n._OrtInit=E.L)(t,o),n._OrtGetLastError=(t,o)=>(n._OrtGetLastError=E.M)(t,o),n._OrtCreateSessionOptions=(t,o,s,c,O,S,P,Z,le,ie)=>(n._OrtCreateSessionOptions=E.N)(t,o,s,c,O,S,P,Z,le,ie),n._OrtAppendExecutionProvider=(t,o)=>(n._OrtAppendExecutionProvider=E.O)(t,o),n._OrtAddFreeDimensionOverride=(t,o,s)=>(n._OrtAddFreeDimensionOverride=E.P)(t,o,s),n._OrtAddSessionConfigEntry=(t,o,s)=>(n._OrtAddSessionConfigEntry=E.Q)(t,o,s),n._OrtReleaseSessionOptions=t=>(n._OrtReleaseSessionOptions=E.R)(t),n._OrtCreateSession=(t,o,s)=>(n._OrtCreateSession=E.S)(t,o,s),n._OrtReleaseSession=t=>(n._OrtReleaseSession=E.T)(t),n._OrtGetInputOutputCount=(t,o,s)=>(n._OrtGetInputOutputCount=E.U)(t,o,s),n._OrtGetInputName=(t,o)=>(n._OrtGetInputName=E.V)(t,o),n._OrtGetOutputName=(t,o)=>(n._OrtGetOutputName=E.W)(t,o),n._OrtFree=t=>(n._OrtFree=E.X)(t),n._OrtCreateTensor=(t,o,s,c,O,S)=>(n._OrtCreateTensor=E.Y)(t,o,s,c,O,S),n._OrtGetTensorData=(t,o,s,c,O)=>(n._OrtGetTensorData=E.Z)(t,o,s,c,O),n._OrtReleaseTensor=t=>(n._OrtReleaseTensor=E._)(t),n._OrtCreateRunOptions=(t,o,s,c)=>(n._OrtCreateRunOptions=E.$)(t,o,s,c),n._OrtAddRunConfigEntry=(t,o,s)=>(n._OrtAddRunConfigEntry=E.aa)(t,o,s),n._OrtReleaseRunOptions=t=>(n._OrtReleaseRunOptions=E.ba)(t),n._OrtCreateBinding=t=>(n._OrtCreateBinding=E.ca)(t),n._OrtBindInput=(t,o,s)=>(n._OrtBindInput=E.da)(t,o,s),n._OrtBindOutput=(t,o,s,c)=>(n._OrtBindOutput=E.ea)(t,o,s,c),n._OrtClearBoundOutputs=t=>(n._OrtClearBoundOutputs=E.fa)(t),n._OrtReleaseBinding=t=>(n._OrtReleaseBinding=E.ga)(t),n._OrtRunWithBinding=(t,o,s,c,O)=>(n._OrtRunWithBinding=E.ha)(t,o,s,c,O),n._OrtRun=(t,o,s,c,O,S,P,Z)=>(n._OrtRun=E.ia)(t,o,s,c,O,S,P,Z),n._OrtEndProfiling=t=>(n._OrtEndProfiling=E.ja)(t),n._OrtTrainingLoadCheckpoint=(t,o)=>(n._OrtTrainingLoadCheckpoint=E.ka)(t,o),n._OrtTrainingReleaseCheckpoint=t=>(n._OrtTrainingReleaseCheckpoint=E.la)(t),n._OrtTrainingCreateSession=(t,o,s,c,O,S,P,Z)=>(n._OrtTrainingCreateSession=E.ma)(t,o,s,c,O,S,P,Z),n._OrtTrainingLazyResetGrad=t=>(n._OrtTrainingLazyResetGrad=E.na)(t),n._OrtTrainingRunTrainStep=(t,o,s,c,O,S)=>(n._OrtTrainingRunTrainStep=E.oa)(t,o,s,c,O,S),n._OrtTrainingOptimizerStep=(t,o)=>(n._OrtTrainingOptimizerStep=E.pa)(t,o),n._OrtTrainingEvalStep=(t,o,s,c,O,S)=>(n._OrtTrainingEvalStep=E.qa)(t,o,s,c,O,S),n._OrtTrainingGetParametersSize=(t,o,s)=>(n._OrtTrainingGetParametersSize=E.ra)(t,o,s),n._OrtTrainingCopyParametersToBuffer=(t,o,s,c)=>(n._OrtTrainingCopyParametersToBuffer=E.sa)(t,o,s,c),n._OrtTrainingCopyParametersFromBuffer=(t,o,s,c)=>(n._OrtTrainingCopyParametersFromBuffer=E.ta)(t,o,s,c),n._OrtTrainingGetModelInputOutputCount=(t,o,s,c)=>(n._OrtTrainingGetModelInputOutputCount=E.ua)(t,o,s,c),n._OrtTrainingGetModelInputOutputName=(t,o,s,c)=>(n._OrtTrainingGetModelInputOutputName=E.va)(t,o,s,c),n._OrtTrainingReleaseSession=t=>(n._OrtTrainingReleaseSession=E.wa)(t);var Ze=n._malloc=t=>(Ze=n._malloc=E.xa)(t);n._free=t=>(n._free=E.ya)(t);var He=t=>(He=E.Aa)(t),Ke=()=>(Ke=E.Ba)(),Ge=t=>(Ge=E.Ca)(t),C=t=>(C=E.Da)(t);function ze(t){t=Object.assign({},t);var o=c=>()=>c()>>>0,s=c=>O=>c(O)>>>0;return t.__errno_location=o(t.__errno_location),t.malloc=s(t.malloc),t.stackSave=o(t.stackSave),t.stackAlloc=s(t.stackAlloc),t}n.stackAlloc=C,n.stackSave=Ke,n.stackRestore=Ge,n.UTF8ToString=be,n.stringToUTF8=(t,o,s)=>We(t,ce,o,s),n.lengthBytesUTF8=De;var Ue;ue=function t(){Ue||Le(),Ue||(ue=t)};function Le(){function t(){if(!Ue&&(Ue=!0,n.calledRun=!0,!ve)){if(ge(Pe),h(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;){var o=n.postRun.shift();V.unshift(o)}ge(V)}}if(!(0<F)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)A();ge(_e),0<F||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),t()},1)):t())}}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return Le(),d.ready}})();typeof cr=="object"&&typeof Ct=="object"?Ct.exports=lr:typeof define=="function"&&define.amd&&define([],()=>lr)});var pr=nt(()=>{});var mr=nt(()=>{});var gr={};Et(gr,{cpus:()=>tn});var tn,hr=_t(()=>{tn=void 0});var wr=nt((br,Rt)=>{"use strict";var yr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){function n(){return V.buffer!=re.buffer&&pe(),re}function h(){return V.buffer!=re.buffer&&pe(),Ee}function f(){return V.buffer!=re.buffer&&pe(),J}function w(){return V.buffer!=re.buffer&&pe(),fe}function g(){return V.buffer!=re.buffer&&pe(),ke}var i=d,T,I;i.ready=new Promise((e,r)=>{T=e,I=r});var x=Object.assign({},i),R="./this.program",D=(e,r)=>{throw r},ee=typeof window=="object",U=typeof importScripts=="function",L=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",v=i.ENVIRONMENT_IS_PTHREAD||!1,k="";function W(e){return i.locateFile?i.locateFile(e,k):k+e}var z,ae,E;if(L){var ve=(Tt(),at(St)),Oe=(Mt(),at(At));k=U?Oe.dirname(k)+"/":__dirname+"/",z=(r,a)=>(r=r.startsWith("file://")?new URL(r):Oe.normalize(r),ve.readFileSync(r,a?void 0:"utf8")),E=r=>(r=z(r,!0),r.buffer||(r=new Uint8Array(r)),r),ae=(r,a,l,b=!0)=>{r=r.startsWith("file://")?new URL(r):Oe.normalize(r),ve.readFile(r,b?void 0:"utf8",(y,_)=>{y?l(y):a(b?_.buffer:_)})},!i.thisProgram&&1<process.argv.length&&(R=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),D=(r,a)=>{throw process.exitCode=r,a},i.inspect=()=>"[Emscripten Module object]";let e;try{e=pr()}catch(r){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),r}global.Worker=e.Worker}else(ee||U)&&(U?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),typeof u<"u"&&u&&(k=u),k.indexOf("blob:")!==0?k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):k="",L||(z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},U&&(E=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),ae=(e,r,a)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):a()},l.onerror=a,l.send(null)}));L&&typeof performance>"u"&&(global.performance=mr().performance);var ce=console.log.bind(console),M=console.error.bind(console);L&&(ce=(...e)=>ve.writeSync(1,e.join(" ")+`\n`),M=(...e)=>ve.writeSync(2,e.join(" ")+`\n`));var N=i.print||ce,oe=i.printErr||M;Object.assign(i,x),x=null,i.thisProgram&&(R=i.thisProgram),i.quit&&(D=i.quit);var _e;i.wasmBinary&&(_e=i.wasmBinary);var Pe=i.noExitRuntime||!0;typeof WebAssembly!="object"&&we("no native wasm support detected");var V,A,F,de=!1,ue,re,Ee,J,fe,ke;function pe(){var e=V.buffer;i.HEAP8=re=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=J=new Int32Array(e),i.HEAPU8=Ee=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=fe=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=ke=new Float64Array(e)}var Se=i.INITIAL_MEMORY||16777216;if(5242880<=Se||we("INITIAL_MEMORY should be larger than STACK_SIZE, was "+Se+"! (STACK_SIZE=5242880)"),v)V=i.wasmMemory;else if(i.wasmMemory)V=i.wasmMemory;else if(V=new WebAssembly.Memory({initial:Se/65536,maximum:65536,shared:!0}),!(V.buffer instanceof SharedArrayBuffer))throw oe("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),L&&oe("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");pe(),Se=V.buffer.byteLength;var Ie,ye=[],ge=[],Te=[],Re=0;function te(){return Pe||0<Re}var j=0,he=null,be=null;function De(){j++,i.monitorRunDependencies&&i.monitorRunDependencies(j)}function We(){if(j--,i.monitorRunDependencies&&i.monitorRunDependencies(j),j==0&&(he!==null&&(clearInterval(he),he=null),be)){var e=be;be=null,e()}}function we(e){throw i.onAbort&&i.onAbort(e),e="Aborted("+e+")",oe(e),de=!0,ue=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),I(e),e}function $e(e){return e.startsWith("data:application/octet-stream;base64,")}var Ce;Ce="ort-wasm-threaded.wasm",$e(Ce)||(Ce=W(Ce));function qe(e){if(e==Ce&&_e)return new Uint8Array(_e);if(E)return E(e);throw"both async and sync fetching of the wasm failed"}function Ve(e){if(!_e&&(ee||U)){if(typeof fetch=="function"&&!e.startsWith("file://"))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at \'"+e+"\'";return r.arrayBuffer()}).catch(()=>qe(e));if(ae)return new Promise((r,a)=>{ae(e,l=>r(new Uint8Array(l)),a)})}return Promise.resolve().then(()=>qe(e))}function Je(e,r,a){return Ve(e).then(l=>WebAssembly.instantiate(l,r)).then(l=>l).then(a,l=>{oe("failed to asynchronously prepare wasm: "+l),we(l)})}function Xe(e,r){var a=Ce;return _e||typeof WebAssembly.instantiateStreaming!="function"||$e(a)||a.startsWith("file://")||L||typeof fetch!="function"?Je(a,e,r):fetch(a,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(b){return oe("wasm streaming compile failed: "+b),oe("falling back to ArrayBuffer instantiation"),Je(a,e,r)}))}var Fe;function xe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}function Ne(e){e.terminate(),e.onmessage=()=>{}}function it(e){(e=C.La[e])||we(),C.lb(e)}function Qe(e){var r=C.fb();if(!r)return 6;C.Oa.push(r),C.La[e.Na]=r,r.Na=e.Na;var a={cmd:"run",start_routine:e.mb,arg:e.eb,pthread_ptr:e.Na};return L&&r.unref(),r.postMessage(a,e.sb),0}var st=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ze=(e,r,a)=>{r>>>=0;var l=r+a;for(a=r;e[a]&&!(a>=l);)++a;if(16<a-r&&e.buffer&&st)return st.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,a):e.subarray(r,a));for(l="";r<a;){var b=e[r++];if(b&128){var y=e[r++]&63;if((b&224)==192)l+=String.fromCharCode((b&31)<<6|y);else{var _=e[r++]&63;b=(b&240)==224?(b&15)<<12|y<<6|_:(b&7)<<18|y<<12|_<<6|e[r++]&63,65536>b?l+=String.fromCharCode(b):(b-=65536,l+=String.fromCharCode(55296|b>>10,56320|b&1023))}}else l+=String.fromCharCode(b)}return l},He=(e,r)=>(e>>>=0)?Ze(h(),e,r):"";function Ke(e){if(v)return Y(1,1,e);ue=e,te()||(C.nb(),i.onExit&&i.onExit(e),de=!0),D(e,new xe(e))}var Ge=e=>{if(ue=e,v)throw Ue(e),"unwind";Ke(e)},C={Ra:[],Oa:[],Za:[],La:{},Va:function(){v?C.hb():C.gb()},gb:function(){ye.unshift(()=>{De(),C.ib(()=>We())})},hb:function(){C.receiveObjectTransfer=C.kb,C.threadInitTLS=C.Ya,C.setExitStatus=C.Xa,Pe=!1},Xa:function(e){ue=e},xb:["$terminateWorker"],nb:function(){for(var e of C.Oa)Ne(e);for(e of C.Ra)Ne(e);C.Ra=[],C.Oa=[],C.La=[]},lb:function(e){var r=e.Na;delete C.La[r],C.Ra.push(e),C.Oa.splice(C.Oa.indexOf(e),1),e.Na=0,yt(r)},kb:function(){},Ya:function(){C.Za.forEach(e=>e())},jb:e=>new Promise(r=>{e.onmessage=y=>{y=y.data;var _=y.cmd;if(y.targetThread&&y.targetThread!=ft()){var X=C.La[y.wb];X?X.postMessage(y,y.transferList):oe(\'Internal error! Worker sent a message "\'+_+\'" to target pthread \'+y.targetThread+", but that thread no longer exists!")}else _==="checkMailbox"?ut():_==="spawnThread"?Qe(y):_==="cleanupThread"?it(y.thread):_==="killThread"?(y=y.thread,_=C.La[y],delete C.La[y],Ne(_),yt(y),C.Oa.splice(C.Oa.indexOf(_),1),_.Na=0):_==="cancelThread"?C.La[y.thread].postMessage({cmd:"cancel"}):_==="loaded"?(e.loaded=!0,r(e)):_==="alert"?alert("Thread "+y.threadId+": "+y.text):y.target==="setimmediate"?e.postMessage(y):_==="callHandler"?i[y.handler](...y.args):_&&oe("worker sent an unknown command "+_)},e.onerror=y=>{throw oe("worker sent an error! "+y.filename+":"+y.lineno+": "+y.message),y},L&&(e.on("message",function(y){e.onmessage({data:y})}),e.on("error",function(y){e.onerror(y)}));var a=[],l=["onExit","onAbort","print","printErr"],b;for(b of l)i.hasOwnProperty(b)&&a.push(b);e.postMessage({cmd:"load",handlers:a,urlOrBlob:i.mainScriptUrlOrBlob||u,wasmMemory:V,wasmModule:F})}),ib:function(e){e()},cb:function(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),C.Ra.push(e)},fb:function(){return C.Ra.length==0&&(C.cb(),C.jb(C.Ra[0])),C.Ra.pop()}};i.PThread=C;var ze=e=>{for(;0<e.length;)e.shift()(i)};i.establishStackSpace=function(){var e=ft(),r=f()[e+52>>2>>>0];e=f()[e+56>>2>>>0],ar(r,r-e),lt(r)};function Ue(e){if(v)return Y(2,0,e);Ge(e)}var Le=[];i.invokeEntryPoint=function(e,r){var a=Le[e];a||(e>=Le.length&&(Le.length=e+1),Le[e]=a=Ie.get(e)),e=a(r),te()?C.Xa(e):bt(e)};function t(e){this.Ua=e-24,this.bb=function(r){w()[this.Ua+4>>2>>>0]=r},this.ab=function(r){w()[this.Ua+8>>2>>>0]=r},this.Va=function(r,a){this.$a(),this.bb(r),this.ab(a)},this.$a=function(){w()[this.Ua+16>>2>>>0]=0}}var o=0,s=0;function c(e,r,a,l){return v?Y(3,1,e,r,a,l):O(e,r,a,l)}function O(e,r,a,l){if(e>>>=0,r>>>=0,a>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return oe("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var b=[];return v&&b.length===0?c(e,r,a,l):(e={mb:a,Na:e,eb:l,sb:b},v?(e.ub="spawnThread",postMessage(e,b),0):Qe(e))}function S(e,r,a){return v?Y(4,1,e,r,a):0}function P(e,r){if(v)return Y(5,1,e,r)}var Z=e=>{for(var r=0,a=0;a<e.length;++a){var l=e.charCodeAt(a);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++a):r+=3}return r},le=(e,r,a,l)=>{if(a>>>=0,!(0<l))return 0;var b=a;l=a+l-1;for(var y=0;y<e.length;++y){var _=e.charCodeAt(y);if(55296<=_&&57343>=_){var X=e.charCodeAt(++y);_=65536+((_&1023)<<10)|X&1023}if(127>=_){if(a>=l)break;r[a++>>>0]=_}else{if(2047>=_){if(a+1>=l)break;r[a++>>>0]=192|_>>6}else{if(65535>=_){if(a+2>=l)break;r[a++>>>0]=224|_>>12}else{if(a+3>=l)break;r[a++>>>0]=240|_>>18,r[a++>>>0]=128|_>>12&63}r[a++>>>0]=128|_>>6&63}r[a++>>>0]=128|_&63}}return r[a>>>0]=0,a-b},ie=(e,r,a)=>le(e,h(),r,a);function se(e,r){if(v)return Y(6,1,e,r)}function et(e,r,a){if(v)return Y(7,1,e,r,a)}function tt(e,r,a){return v?Y(8,1,e,r,a):0}function p(e,r){if(v)return Y(9,1,e,r)}function B(e,r,a){if(v)return Y(10,1,e,r,a)}function G(e,r,a,l){if(v)return Y(11,1,e,r,a,l)}function Ae(e,r,a,l){if(v)return Y(12,1,e,r,a,l)}function rt(e,r,a,l){if(v)return Y(13,1,e,r,a,l)}function Ut(e){if(v)return Y(14,1,e)}function Lt(e,r){if(v)return Y(15,1,e,r)}function Bt(e,r,a){if(v)return Y(16,1,e,r,a)}var Nr=e=>{if(!de)try{if(e(),!te())try{v?bt(ue):Ge(ue)}catch(r){r instanceof xe||r=="unwind"||D(1,r)}}catch(r){r instanceof xe||r=="unwind"||D(1,r)}};function pt(e){e>>>=0,typeof Atomics.tb=="function"&&(Atomics.tb(f(),e>>2,e).value.then(ut),e+=128,Atomics.store(f(),e>>2,1))}i.__emscripten_thread_mailbox_await=pt;function ut(){var e=ft();e&&(pt(e),Nr(()=>rr()))}i.checkMailbox=ut;var je=e=>e%4===0&&(e%100!==0||e%400===0),kt=[0,31,60,91,121,152,182,213,244,274,305,335],Wt=[0,31,59,90,120,151,181,212,243,273,304,334];function Nt(e,r,a,l,b,y,_,X){return v?Y(17,1,e,r,a,l,b,y,_,X):-52}function Ht(e,r,a,l,b,y,_){if(v)return Y(18,1,e,r,a,l,b,y,_)}var Gt=e=>{var r=Z(e)+1,a=Kt(r);return a&&ie(e,a,r),a},Hr=e=>{var r=wt();return e=e(),lt(r),e};function Y(e,r){var a=arguments.length-2,l=arguments;return Hr(()=>{for(var b=Ot(8*a),y=b>>3,_=0;_<a;_++){var X=l[2+_];g()[y+_>>>0]=X}return tr(e,a,b,r)})}var mt=[],gt={},zt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:R||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var a=[];for(r in e)a.push(`${r}=${e[r]}`);ht=a}return ht},ht;function jt(e,r){if(v)return Y(19,1,e,r);e>>>=0,r>>>=0;var a=0;return zt().forEach(function(l,b){var y=r+a;for(b=w()[e+4*b>>2>>>0]=y,y=0;y<l.length;++y)n()[b++>>0>>>0]=l.charCodeAt(y);n()[b>>0>>>0]=0,a+=l.length+1}),0}function Yt(e,r){if(v)return Y(20,1,e,r);e>>>=0,r>>>=0;var a=zt();w()[e>>2>>>0]=a.length;var l=0;return a.forEach(function(b){l+=b.length+1}),w()[r>>2>>>0]=l,0}function $t(e){return v?Y(21,1,e):52}function qt(e,r,a,l){return v?Y(22,1,e,r,a,l):52}function Vt(e,r,a,l,b){return v?Y(23,1,e,r,a,l,b):70}var Gr=[null,[],[]];function Jt(e,r,a,l){if(v)return Y(24,1,e,r,a,l);r>>>=0,a>>>=0,l>>>=0;for(var b=0,y=0;y<a;y++){var _=w()[r>>2>>>0],X=w()[r+4>>2>>>0];r+=8;for(var Me=0;Me<X;Me++){var ne=h()[_+Me>>>0],me=Gr[e];ne===0||ne===10?((e===1?N:oe)(Ze(me,0)),me.length=0):me.push(ne)}b+=X}return w()[l>>2>>>0]=b,0}var Xt=[31,29,31,30,31,30,31,31,30,31,30,31],Qt=[31,28,31,30,31,30,31,31,30,31,30,31];function zr(e){var r=Array(Z(e)+1);return le(e,r,0,r.length),r}var jr=(e,r)=>{n().set(e,r>>>0)};function Zt(e,r,a,l){function b(m,H,Q){for(m=typeof m=="number"?m.toString():m||"";m.length<H;)m=Q[0]+m;return m}function y(m,H){return b(m,H,"0")}function _(m,H){function Q(ur){return 0>ur?-1:0<ur?1:0}var Be;return(Be=Q(m.getFullYear()-H.getFullYear()))===0&&(Be=Q(m.getMonth()-H.getMonth()))===0&&(Be=Q(m.getDate()-H.getDate())),Be}function X(m){switch(m.getDay()){case 0:return new Date(m.getFullYear()-1,11,29);case 1:return m;case 2:return new Date(m.getFullYear(),0,3);case 3:return new Date(m.getFullYear(),0,2);case 4:return new Date(m.getFullYear(),0,1);case 5:return new Date(m.getFullYear()-1,11,31);case 6:return new Date(m.getFullYear()-1,11,30)}}function Me(m){var H=m.Pa;for(m=new Date(new Date(m.Qa+1900,0,1).getTime());0<H;){var Q=m.getMonth(),Be=(je(m.getFullYear())?Xt:Qt)[Q];if(H>Be-m.getDate())H-=Be-m.getDate()+1,m.setDate(1),11>Q?m.setMonth(Q+1):(m.setMonth(0),m.setFullYear(m.getFullYear()+1));else{m.setDate(m.getDate()+H);break}}return Q=new Date(m.getFullYear()+1,0,4),H=X(new Date(m.getFullYear(),0,4)),Q=X(Q),0>=_(H,m)?0>=_(Q,m)?m.getFullYear()+1:m.getFullYear():m.getFullYear()-1}e>>>=0,r>>>=0,a>>>=0,l>>>=0;var ne=f()[l+40>>2>>>0];l={qb:f()[l>>2>>>0],pb:f()[l+4>>2>>>0],Sa:f()[l+8>>2>>>0],Wa:f()[l+12>>2>>>0],Ta:f()[l+16>>2>>>0],Qa:f()[l+20>>2>>>0],Ma:f()[l+24>>2>>>0],Pa:f()[l+28>>2>>>0],yb:f()[l+32>>2>>>0],ob:f()[l+36>>2>>>0],rb:ne?He(ne):""},a=He(a),ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var me in ne)a=a.replace(new RegExp(me,"g"),ne[me]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),sr="January February March April May June July August September October November December".split(" ");ne={"%a":m=>ir[m.Ma].substring(0,3),"%A":m=>ir[m.Ma],"%b":m=>sr[m.Ta].substring(0,3),"%B":m=>sr[m.Ta],"%C":m=>y((m.Qa+1900)/100|0,2),"%d":m=>y(m.Wa,2),"%e":m=>b(m.Wa,2," "),"%g":m=>Me(m).toString().substring(2),"%G":m=>Me(m),"%H":m=>y(m.Sa,2),"%I":m=>(m=m.Sa,m==0?m=12:12<m&&(m-=12),y(m,2)),"%j":m=>{for(var H=0,Q=0;Q<=m.Ta-1;H+=(je(m.Qa+1900)?Xt:Qt)[Q++]);return y(m.Wa+H,3)},"%m":m=>y(m.Ta+1,2),"%M":m=>y(m.pb,2),"%n":()=>`\n`,"%p":m=>0<=m.Sa&&12>m.Sa?"AM":"PM","%S":m=>y(m.qb,2),"%t":()=>"	","%u":m=>m.Ma||7,"%U":m=>y(Math.floor((m.Pa+7-m.Ma)/7),2),"%V":m=>{var H=Math.floor((m.Pa+7-(m.Ma+6)%7)/7);if(2>=(m.Ma+371-m.Pa-2)%7&&H++,H)H==53&&(Q=(m.Ma+371-m.Pa)%7,Q==4||Q==3&&je(m.Qa)||(H=1));else{H=52;var Q=(m.Ma+7-m.Pa-1)%7;(Q==4||Q==5&&je(m.Qa%400-1))&&H++}return y(H,2)},"%w":m=>m.Ma,"%W":m=>y(Math.floor((m.Pa+7-(m.Ma+6)%7)/7),2),"%y":m=>(m.Qa+1900).toString().substring(2),"%Y":m=>m.Qa+1900,"%z":m=>{m=m.ob;var H=0<=m;return m=Math.abs(m)/60,(H?"+":"-")+("0000"+(m/60*100+m%60)).slice(-4)},"%Z":m=>m.rb,"%%":()=>"%"},a=a.replace(/%%/g,"\\0\\0");for(me in ne)a.includes(me)&&(a=a.replace(new RegExp(me,"g"),ne[me](l)));return a=a.replace(/\\0\\0/g,"%"),me=zr(a),me.length>r?0:(jr(me,e),me.length-1)}C.Va();var Yr=[null,Ke,Ue,c,S,P,se,et,tt,p,B,G,Ae,rt,Ut,Lt,Bt,Nt,Ht,jt,Yt,$t,qt,Vt,Jt],$r={b:function(e,r,a){throw e>>>=0,new t(e).Va(r>>>0,a>>>0),o=e,s++,o},N:function(e){er(e>>>0,!U,1,!ee,131072,!1),C.Ya()},j:function(e){e>>>=0,v?postMessage({cmd:"cleanupThread",thread:e}):it(e)},I:O,h:S,T:P,D:se,F:et,U:tt,R:p,J:B,Q:G,n:Ae,E:rt,B:Ut,S:Lt,C:Bt,q:()=>!0,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(()=>ut()):v?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=C.La[e])&&e.postMessage({cmd:"checkMailbox"})},L:function(){return-1},M:pt,p:function(e){L&&C.La[e>>>0].ref()},t:function(e,r,a){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,a>>>=0,e=new Date(1e3*e),f()[a>>2>>>0]=e.getUTCSeconds(),f()[a+4>>2>>>0]=e.getUTCMinutes(),f()[a+8>>2>>>0]=e.getUTCHours(),f()[a+12>>2>>>0]=e.getUTCDate(),f()[a+16>>2>>>0]=e.getUTCMonth(),f()[a+20>>2>>>0]=e.getUTCFullYear()-1900,f()[a+24>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[a+28>>2>>>0]=e},u:function(e,r,a){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,a>>>=0,e=new Date(1e3*e),f()[a>>2>>>0]=e.getSeconds(),f()[a+4>>2>>>0]=e.getMinutes(),f()[a+8>>2>>>0]=e.getHours(),f()[a+12>>2>>>0]=e.getDate(),f()[a+16>>2>>>0]=e.getMonth(),f()[a+20>>2>>>0]=e.getFullYear()-1900,f()[a+24>>2>>>0]=e.getDay(),r=(je(e.getFullYear())?kt:Wt)[e.getMonth()]+e.getDate()-1|0,f()[a+28>>2>>>0]=r,f()[a+36>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[a+32>>2>>>0]=e},v:function(e){e>>>=0;var r=new Date(f()[e+20>>2>>>0]+1900,f()[e+16>>2>>>0],f()[e+12>>2>>>0],f()[e+8>>2>>>0],f()[e+4>>2>>>0],f()[e>>2>>>0],0),a=f()[e+32>>2>>>0],l=r.getTimezoneOffset(),b=new Date(r.getFullYear(),6,1).getTimezoneOffset(),y=new Date(r.getFullYear(),0,1).getTimezoneOffset(),_=Math.min(y,b);return 0>a?f()[e+32>>2>>>0]=+(b!=y&&_==l):0<a!=(_==l)&&(b=Math.max(y,b),r.setTime(r.getTime()+6e4*((0<a?_:b)-l))),f()[e+24>>2>>>0]=r.getDay(),a=(je(r.getFullYear())?kt:Wt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>2>>>0]=a,f()[e>>2>>>0]=r.getSeconds(),f()[e+4>>2>>>0]=r.getMinutes(),f()[e+8>>2>>>0]=r.getHours(),f()[e+12>>2>>>0]=r.getDate(),f()[e+16>>2>>>0]=r.getMonth(),f()[e+20>>2>>>0]=r.getYear(),e=r.getTime()/1e3,nr((Fe=e,1<=+Math.abs(Fe)?0<Fe?+Math.floor(Fe/4294967296)>>>0:~~+Math.ceil((Fe-+(~~Fe>>>0))/4294967296)>>>0:0)),e>>>0},r:Nt,s:Ht,y:function(e,r,a){function l(ne){return(ne=ne.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ne[1]:"GMT"}e>>>=0,r>>>=0,a>>>=0;var b=new Date().getFullYear(),y=new Date(b,0,1),_=new Date(b,6,1);b=y.getTimezoneOffset();var X=_.getTimezoneOffset(),Me=Math.max(b,X);w()[e>>2>>>0]=60*Me,f()[r>>2>>>0]=+(b!=X),e=l(y),r=l(_),e=Gt(e),r=Gt(r),X<b?(w()[a>>2>>>0]=e,w()[a+4>>2>>>0]=r):(w()[a>>2>>>0]=r,w()[a+4>>2>>>0]=e)},c:()=>{we("")},k:function(){},i:function(){return Date.now()},o:()=>{throw Re+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:function(){return L?(hr(),at(gr)).cpus().length:navigator.hardwareConcurrency},K:function(e,r,a,l){for(C.vb=r>>>0,mt.length=a,r=l>>>0>>3,l=0;l<a;l++)mt[l]=g()[r+l>>>0];return Yr[e].apply(null,mt)},x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var a=1;4>=a;a*=2){var l=r*(1+.2/a);l=Math.min(l,e+100663296);var b=Math;l=Math.max(e,l);e:{b=b.min.call(b,4294901760,l+(65536-l%65536)%65536)-V.buffer.byteLength+65535>>>16;try{V.grow(b),pe();var y=1;break e}catch{}y=void 0}if(y)return!0}return!1},O:jt,P:Yt,H:Ge,g:$t,m:qt,w:Vt,l:Jt,a:V||i.wasmMemory,G:Zt,d:function(e,r,a,l){return Zt(e>>>0,r>>>0,a>>>0,l>>>0)}};(function(){function e(a,l){return a=a.exports,A=a=qr(a),C.Za.push(A.ya),Ie=A.za,ge.unshift(A.V),F=l,We(),a}var r={a:$r};if(De(),i.instantiateWasm)try{return i.instantiateWasm(r,e)}catch(a){oe("Module.instantiateWasm callback failed with error: "+a),I(a)}return Xe(r,function(a){e(a.instance,a.module)}).catch(I),{}})(),i._OrtInit=(e,r)=>(i._OrtInit=A.W)(e,r),i._OrtGetLastError=(e,r)=>(i._OrtGetLastError=A.X)(e,r),i._OrtCreateSessionOptions=(e,r,a,l,b,y,_,X,Me,ne)=>(i._OrtCreateSessionOptions=A.Y)(e,r,a,l,b,y,_,X,Me,ne),i._OrtAppendExecutionProvider=(e,r)=>(i._OrtAppendExecutionProvider=A.Z)(e,r),i._OrtAddFreeDimensionOverride=(e,r,a)=>(i._OrtAddFreeDimensionOverride=A._)(e,r,a),i._OrtAddSessionConfigEntry=(e,r,a)=>(i._OrtAddSessionConfigEntry=A.$)(e,r,a),i._OrtReleaseSessionOptions=e=>(i._OrtReleaseSessionOptions=A.aa)(e),i._OrtCreateSession=(e,r,a)=>(i._OrtCreateSession=A.ba)(e,r,a),i._OrtReleaseSession=e=>(i._OrtReleaseSession=A.ca)(e),i._OrtGetInputOutputCount=(e,r,a)=>(i._OrtGetInputOutputCount=A.da)(e,r,a),i._OrtGetInputName=(e,r)=>(i._OrtGetInputName=A.ea)(e,r),i._OrtGetOutputName=(e,r)=>(i._OrtGetOutputName=A.fa)(e,r),i._OrtFree=e=>(i._OrtFree=A.ga)(e),i._OrtCreateTensor=(e,r,a,l,b,y)=>(i._OrtCreateTensor=A.ha)(e,r,a,l,b,y),i._OrtGetTensorData=(e,r,a,l,b)=>(i._OrtGetTensorData=A.ia)(e,r,a,l,b),i._OrtReleaseTensor=e=>(i._OrtReleaseTensor=A.ja)(e),i._OrtCreateRunOptions=(e,r,a,l)=>(i._OrtCreateRunOptions=A.ka)(e,r,a,l),i._OrtAddRunConfigEntry=(e,r,a)=>(i._OrtAddRunConfigEntry=A.la)(e,r,a),i._OrtReleaseRunOptions=e=>(i._OrtReleaseRunOptions=A.ma)(e),i._OrtCreateBinding=e=>(i._OrtCreateBinding=A.na)(e),i._OrtBindInput=(e,r,a)=>(i._OrtBindInput=A.oa)(e,r,a),i._OrtBindOutput=(e,r,a,l)=>(i._OrtBindOutput=A.pa)(e,r,a,l),i._OrtClearBoundOutputs=e=>(i._OrtClearBoundOutputs=A.qa)(e),i._OrtReleaseBinding=e=>(i._OrtReleaseBinding=A.ra)(e),i._OrtRunWithBinding=(e,r,a,l,b)=>(i._OrtRunWithBinding=A.sa)(e,r,a,l,b),i._OrtRun=(e,r,a,l,b,y,_,X)=>(i._OrtRun=A.ta)(e,r,a,l,b,y,_,X),i._OrtEndProfiling=e=>(i._OrtEndProfiling=A.ua)(e);var ft=i._pthread_self=()=>(ft=i._pthread_self=A.va)(),Kt=i._malloc=e=>(Kt=i._malloc=A.wa)(e);i._free=e=>(i._free=A.xa)(e),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=A.ya)();var er=i.__emscripten_thread_init=(e,r,a,l,b,y)=>(er=i.__emscripten_thread_init=A.Aa)(e,r,a,l,b,y);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=A.Ba)();var tr=(e,r,a,l)=>(tr=A.Ca)(e,r,a,l),yt=e=>(yt=A.Da)(e),bt=i.__emscripten_thread_exit=e=>(bt=i.__emscripten_thread_exit=A.Ea)(e),rr=i.__emscripten_check_mailbox=()=>(rr=i.__emscripten_check_mailbox=A.Fa)(),nr=e=>(nr=A.Ga)(e),ar=(e,r)=>(ar=A.Ha)(e,r),wt=()=>(wt=A.Ia)(),lt=e=>(lt=A.Ja)(e),Ot=e=>(Ot=A.Ka)(e);function qr(e){e=Object.assign({},e);var r=l=>()=>l()>>>0,a=l=>b=>l(b)>>>0;return e.__errno_location=r(e.__errno_location),e.pthread_self=r(e.pthread_self),e.malloc=a(e.malloc),e.stackSave=r(e.stackSave),e.stackAlloc=a(e.stackAlloc),e}i.keepRuntimeAlive=te,i.wasmMemory=V,i.stackAlloc=Ot,i.stackSave=wt,i.stackRestore=lt,i.UTF8ToString=He,i.stringToUTF8=ie,i.lengthBytesUTF8=Z,i.ExitStatus=xe,i.PThread=C;var ct;be=function e(){ct||or(),ct||(be=e)};function or(){function e(){if(!ct&&(ct=!0,i.calledRun=!0,!de)&&(v||ze(ge),T(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),!v)){if(i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var r=i.postRun.shift();Te.unshift(r)}ze(Te)}}if(!(0<j))if(v)T(i),v||ze(ge),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)ye.unshift(i.preRun.shift());ze(ye),0<j||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),e()},1)):e())}}if(i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return or(),d.ready}})();typeof br=="object"&&typeof Rt=="object"?Rt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var Or=nt((wn,rn)=>{rn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>(0,eval)(fs.readFileSync(e,"utf8")+"//# sourceURL="+e),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason??e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err("worker.js received unknown command "+e.data.cmd),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed&&Module.__emscripten_thread_crashed(),a}}self.onmessage=handleMessage;\\n\'});var _r;_r=dr();var nn=wr(),Dt,Ft=!1,dt=!1,vr=!1,an=u=>{if(u===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+u+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+u+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},on=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},sn=(u,d)=>u?"ort-training-wasm-simd.wasm":d?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Er=async u=>{if(Ft)return Promise.resolve();if(dt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(vr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");dt=!0;let d=u.initTimeout,n=u.numThreads,h=u.simd,f=an(n),w=h&&on(),g=u.wasmPaths,i=typeof g=="string"?g:void 0,T=sn(w,f),I=typeof g=="object"?g[T]:void 0,x=!1,R=[];if(d>0&&R.push(new Promise(D=>{setTimeout(()=>{x=!0,D()},d)})),R.push(new Promise((D,ee)=>{let U=f?nn:_r,L={locateFile:(v,k)=>f&&v.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Or()],{type:"text/javascript"})):v.endsWith(".wasm")?I||(i??k)+T:k+v};if(f)if(L.numThreads=n,typeof Blob>"u")L.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v=`var ortWasmThreaded=${U.toString()};`;L.mainScriptUrlOrBlob=new Blob([v],{type:"text/javascript"})}U(L).then(v=>{dt=!1,Ft=!0,Dt=v,D()},v=>{dt=!1,vr=!0,ee(v)})})),await Promise.race(R),x)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},K=()=>{if(Ft&&Dt)return Dt;throw new Error("WebAssembly is not initialized yet.")};var $=(u,d)=>{let n=K(),h=n.lengthBytesUTF8(u)+1,f=n._malloc(h);return n.stringToUTF8(u,f,h),d.push(f),f},ot=(u,d,n,h)=>{if(typeof u=="object"&&u!==null){if(n.has(u))throw new Error("Circular reference in options");n.add(u)}Object.entries(u).forEach(([f,w])=>{let g=d?d+f:f;if(typeof w=="object")ot(w,g+".",n,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},q=u=>{let d=K(),n=d.stackSave();try{let h=d.stackAlloc(8);d._OrtGetLastError(h,h+4);let f=d.HEAP32[h/4],w=d.HEAPU32[h/4+1],g=w?d.UTF8ToString(w):"";throw new Error(`${u} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{d.stackRestore(n)}};var Sr=u=>{let d=K(),n=0,h=[],f=u||{};try{if(u?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(f.terminate=!1);let w=0;return u?.tag!==void 0&&(w=$(u.tag,h)),n=d._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),n===0&&q("Can\'t create run options."),u?.extra!==void 0&&ot(u.extra,"",new WeakSet,(g,i)=>{let T=$(g,h),I=$(i,h);d._OrtAddRunConfigEntry(n,T,I)!==0&&q(`Can\'t set a run config entry: ${g} - ${i}.`)}),[n,h]}catch(w){throw n!==0&&d._OrtReleaseRunOptions(n),h.forEach(g=>d._free(g)),w}};var un=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},fn=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},ln=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let d=u.extra.session;d.use_ort_model_bytes_directly||(d.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(n=>(typeof n=="string"?n:n.name)==="webgpu")&&(u.enableMemPattern=!1)},cn=(u,d,n)=>{for(let h of d){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let i=$("deviceType",n),T=$(g.deviceType,n);K()._OrtAddSessionConfigEntry(u,i,T)!==0&&q(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let i=g.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let T=$("numThreads",n),I=$(i.toString(),n);K()._OrtAddSessionConfigEntry(u,T,I)!==0&&q(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let i=$("powerPreference",n),T=$(g.powerPreference,n);K()._OrtAddSessionConfigEntry(u,i,T)!==0&&q(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let i=$("preferredLayout",n),T=$(g.preferredLayout,n);K()._OrtAddSessionConfigEntry(u,i,T)!==0&&q(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=$(f,n);K()._OrtAppendExecutionProvider(u,w)!==0&&q(`Can\'t append execution provider: ${f}.`)}},Tr=u=>{let d=K(),n=0,h=[],f=u||{};ln(f);try{let w=un(f.graphOptimizationLevel??"all"),g=fn(f.executionMode??"sequential"),i=typeof f.logId=="string"?$(f.logId,h):0,T=f.logSeverityLevel??2;if(!Number.isInteger(T)||T<0||T>4)throw new Error(`log serverity level is not valid: ${T}`);let I=f.logVerbosityLevel??0;if(!Number.isInteger(I)||I<0||I>4)throw new Error(`log verbosity level is not valid: ${I}`);let x=typeof f.optimizedModelFilePath=="string"?$(f.optimizedModelFilePath,h):0;if(n=d._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,i,T,I,x),n===0&&q("Can\'t create session options."),f.executionProviders&&cn(n,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let R=$("enableGraphCapture",h),D=$(f.enableGraphCapture.toString(),h);d._OrtAddSessionConfigEntry(n,R,D)!==0&&q(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[R,D]of Object.entries(f.freeDimensionOverrides)){if(typeof R!="string")throw new Error(`free dimension override name must be a string: ${R}`);if(typeof D!="number"||!Number.isInteger(D)||D<0)throw new Error(`free dimension override value must be a non-negative integer: ${D}`);let ee=$(R,h);d._OrtAddFreeDimensionOverride(n,ee,D)!==0&&q(`Can\'t set a free dimension override: ${R} - ${D}.`)}return f.extra!==void 0&&ot(f.extra,"",new WeakSet,(R,D)=>{let ee=$(R,h),U=$(D,h);d._OrtAddSessionConfigEntry(n,ee,U)!==0&&q(`Can\'t set a session config entry: ${R} - ${D}.`)}),[n,h]}catch(w){throw n!==0&&d._OrtReleaseSessionOptions(n),h.forEach(g=>d._free(g)),w}};var Pt=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Ar=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},It=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],Mr=u=>{switch(u){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},Cr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},Rr=u=>u==="float32"||u==="float16"||u==="int32"||u==="int64"||u==="uint32"||u==="uint8"||u==="bool",Dr=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var Fr=async u=>{if(typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(u))}catch(d){if(d.code==="ERR_FS_FILE_TOO_LARGE"){let n=(void 0)(u),h=[];for await(let f of n)h.push(f);return new Uint8Array(Buffer.concat(h))}throw d}else{let d=await fetch(u);if(!d.ok)throw new Error(`failed to load external data file: ${u}`);let n=d.headers.get("Content-Length"),h=n?parseInt(n,10):0;if(h<1073741824)return new Uint8Array(await d.arrayBuffer());{if(!d.body)throw new Error(`failed to load external data file: ${u}, no response body.`);let f=d.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(i){if(i instanceof RangeError){let T=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:T,maximum:T}).buffer}else throw i}let g=0;for(;;){let{done:i,value:T}=await f.read();if(i)break;let I=T.byteLength;new Uint8Array(w,g,I).set(T),g+=I}return new Uint8Array(w,0,h)}}else return u instanceof Blob?new Uint8Array(await u.arrayBuffer()):u instanceof Uint8Array?u:new Uint8Array(u)};var dn=(u,d)=>{K()._OrtInit(u,d)!==0&&q("Can\'t initialize onnxruntime.")},Ir=async u=>{dn(u.wasm.numThreads,Cr(u.logLevel))},xr=async(u,d)=>{},Ye=new Map,pn=u=>{let d=K(),n=d.stackSave();try{let h=d.stackAlloc(8);return d._OrtGetInputOutputCount(u,h,h+4)!==0&&q("Can\'t get session input/output count."),[d.HEAP32[h/4],d.HEAP32[h/4+1]]}finally{d.stackRestore(n)}},xt=u=>{let d=K(),n=d._malloc(u.byteLength);if(n===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return d.HEAPU8.set(u,n),[n,u.byteLength]},Ur=async(u,d)=>{let n,h,f=K();Array.isArray(u)?[n,h]=u:u.buffer===f.HEAPU8.buffer?[n,h]=[u.byteOffset,u.byteLength]:[n,h]=xt(u);let w=0,g=0,i=0,T=[],I=[],x=[];try{if([g,T]=Tr(d),d?.externalData&&f.mountExternalData){let W=[];for(let z of d.externalData){let ae=typeof z=="string"?z:z.path;W.push(Fr(typeof z=="string"?z:z.data).then(E=>{f.mountExternalData(ae,E)}))}await Promise.all(W)}w=await f._OrtCreateSession(n,h,g),w===0&&q("Can\'t create a session.");let[R,D]=pn(w),ee=!!d?.enableGraphCapture,U=[],L=[],v=[];for(let W=0;W<R;W++){let z=f._OrtGetInputName(w,W);z===0&&q("Can\'t get an input name."),I.push(z),U.push(f.UTF8ToString(z))}for(let W=0;W<D;W++){let z=f._OrtGetOutputName(w,W);z===0&&q("Can\'t get an output name."),x.push(z);let ae=f.UTF8ToString(z);L.push(ae)}let k=null;return Ye.set(w,[w,I,x,k,ee,!1]),[w,U,L]}catch(R){throw I.forEach(D=>f._OrtFree(D)),x.forEach(D=>f._OrtFree(D)),i!==0&&f._OrtReleaseBinding(i),w!==0&&f._OrtReleaseSession(w),R}finally{f._free(n),g!==0&&f._OrtReleaseSessionOptions(g),T.forEach(R=>f._free(R)),f.unmountExternalData?.()}},Lr=u=>{let d=K(),n=Ye.get(u);if(!n)throw new Error(`cannot release session. invalid session id: ${u}`);let[h,f,w,g,i]=n;g&&(i&&d._OrtClearBoundOutputs(g.handle),d._OrtReleaseBinding(g.handle)),d.jsepOnReleaseSession?.(u),f.forEach(T=>d._OrtFree(T)),w.forEach(T=>d._OrtFree(T)),d._OrtReleaseSession(h),Ye.delete(u)},Pr=(u,d,n,h,f,w=!1)=>{if(!u){d.push(0);return}let g=K(),i=u[0],T=u[1],I=u[3],x,R;if(i==="string"&&I==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&I!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(I==="gpu-buffer"){let U=u[2].gpuBuffer,L=It(Pt(i));R=T.reduce((k,W)=>k*W,1)*L;let v=g.jsepRegisterBuffer;if(!v)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');x=v(h,f,U,R)}else{let U=u[2];if(Array.isArray(U)){R=4*U.length,x=g._malloc(R),n.push(x);let L=x/4;for(let v=0;v<U.length;v++){if(typeof U[v]!="string")throw new TypeError(`tensor data at index ${v} is not a string`);g.HEAPU32[L++]=$(U[v],n)}}else R=U.byteLength,x=g._malloc(R),n.push(x),g.HEAPU8.set(new Uint8Array(U.buffer,U.byteOffset,R),x)}let D=g.stackSave(),ee=g.stackAlloc(4*T.length);try{let U=ee/4;T.forEach(v=>g.HEAP32[U++]=v);let L=g._OrtCreateTensor(Pt(i),x,R,ee,T.length,Dr(I));L===0&&q(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),d.push(L)}finally{g.stackRestore(D)}},Br=async(u,d,n,h,f,w)=>{let g=K(),i=Ye.get(u);if(!i)throw new Error(`cannot run inference. invalid session id: ${u}`);let T=i[0],I=i[1],x=i[2],R=i[3],D=i[4],ee=i[5],U=d.length,L=h.length,v=0,k=[],W=[],z=[],ae=[],E=g.stackSave(),ve=g.stackAlloc(U*4),Oe=g.stackAlloc(U*4),ce=g.stackAlloc(L*4),M=g.stackAlloc(L*4);try{[v,k]=Sr(w);for(let F=0;F<U;F++)Pr(n[F],W,ae,u,d[F],D);for(let F=0;F<L;F++)Pr(f[F],z,ae,u,U+h[F],D);let N=ve/4,oe=Oe/4,_e=ce/4,Pe=M/4;for(let F=0;F<U;F++)g.HEAPU32[N++]=W[F],g.HEAPU32[oe++]=I[d[F]];for(let F=0;F<L;F++)g.HEAPU32[_e++]=z[F],g.HEAPU32[Pe++]=x[h[F]];g.jsepOnRunStart?.(T);let V;V=await g._OrtRun(T,Oe,ve,U,M,L,ce,v),V!==0&&q("failed to call OrtRun().");let A=[];for(let F=0;F<L;F++){let de=g.HEAPU32[ce/4+F];if(de===z[F]){A.push(f[F]);continue}let ue=g.stackSave(),re=g.stackAlloc(4*4),Ee=!1,J,fe=0;try{g._OrtGetTensorData(de,re,re+4,re+8,re+12)!==0&&q(`Can\'t access output tensor data on index ${F}.`);let pe=re/4,Se=g.HEAPU32[pe++];fe=g.HEAPU32[pe++];let Ie=g.HEAPU32[pe++],ye=g.HEAPU32[pe++],ge=[];for(let te=0;te<ye;te++)ge.push(g.HEAPU32[Ie/4+te]);g._OrtFree(Ie);let Te=ge.reduce((te,j)=>te*j,1);J=Ar(Se);let Re=R?.outputPreferredLocations[h[F]];if(J==="string"){if(Re==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],j=fe/4;for(let he=0;he<Te;he++){let be=g.HEAPU32[j++],De=he===Te-1?void 0:g.HEAPU32[j]-be;te.push(g.UTF8ToString(be,De))}A.push([J,ge,te,"cpu"])}else if(Re==="gpu-buffer"&&Te>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let j=te(fe),he=It(Se);if(he===void 0||!Rr(J))throw new Error(`Unsupported data type: ${J}`);Ee=!0,A.push([J,ge,{gpuBuffer:j,download:g.jsepCreateDownloader(j,Te*he,J),dispose:()=>{g._OrtReleaseTensor(de)}},"gpu-buffer"])}else{let te=Mr(J),j=new te(Te);new Uint8Array(j.buffer,j.byteOffset,j.byteLength).set(g.HEAPU8.subarray(fe,fe+j.byteLength)),A.push([J,ge,j,"cpu"])}}finally{g.stackRestore(ue),J==="string"&&fe&&g._free(fe),Ee||g._OrtReleaseTensor(de)}}return R&&!D&&(g._OrtClearBoundOutputs(R.handle),Ye.set(u,[T,I,x,R,D,!1])),A}finally{g.stackRestore(E),W.forEach(N=>g._OrtReleaseTensor(N)),z.forEach(N=>g._OrtReleaseTensor(N)),ae.forEach(N=>g._free(N)),v!==0&&g._OrtReleaseRunOptions(v),k.forEach(N=>g._free(N))}},kr=u=>{let d=K(),n=Ye.get(u);if(!n)throw new Error("invalid session id");let h=n[0],f=d._OrtEndProfiling(h);f===0&&q("Can\'t get an profile file name."),d._OrtFree(f)},Wr=u=>{let d=[];for(let n of u){let h=n[2];!Array.isArray(h)&&"buffer"in h&&d.push(h.buffer)}return d};self.onmessage=u=>{let{type:d,in:n}=u.data;try{switch(d){case"init-wasm":Er(n.wasm).then(()=>{Ir(n).then(()=>{postMessage({type:d})},h=>{postMessage({type:d,err:h})})},h=>{postMessage({type:d,err:h})});break;case"init-ep":{let{epName:h,env:f}=n;xr(f,h).then(()=>{postMessage({type:d})},w=>{postMessage({type:d,err:w})});break}case"copy-from":{let{buffer:h}=n,f=xt(h);postMessage({type:d,out:f});break}case"create":{let{model:h,options:f}=n;Ur(h,f).then(w=>{postMessage({type:d,out:w})},w=>{postMessage({type:d,err:w})});break}case"release":Lr(n),postMessage({type:d});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:i}=n;Br(h,f,w,g,new Array(g.length).fill(null),i).then(T=>{T.some(I=>I[3]!=="cpu")?postMessage({type:d,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:d,out:T},Wr([...w,...T]))},T=>{postMessage({type:d,err:T})});break}case"end-profiling":kr(n),postMessage({type:d});break;default:}}catch(h){postMessage({type:d,err:h})}};})();\n'});var Ke,Me,Ut,rr,nr,Ur,Fr,mt,ht,bo,tr,wa,ba,Oa,va,_a,Ta,Ea,Br=W(()=>{"use strict";Qe();er();Ze();Ke=()=>!!$.wasm.proxy&&typeof document<"u",Ut=!1,rr=!1,nr=!1,Fr=new Map,mt=(n,r)=>{let e=Fr.get(n);e?e.push(r):Fr.set(n,[r])},ht=()=>{if(Ut||!rr||nr||!Me)throw new Error("worker not ready")},bo=n=>{switch(n.data.type){case"init-wasm":Ut=!1,n.data.err?(nr=!0,Ur[1](n.data.err)):(rr=!0,Ur[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let r=Fr.get(n.data.type);n.data.err?r.shift()[1](n.data.err):r.shift()[0](n.data.out);break}default:}},tr=typeof document<"u"?document?.currentScript?.src:void 0,wa=async()=>{if(!rr){if(Ut)throw new Error("multiple calls to 'initWasm()' detected.");if(nr)throw new Error("previous call to 'initWasm()' failed.");if(Ut=!0,Ke())return $.wasm.wasmPaths===void 0&&tr&&tr.indexOf("blob:")!==0&&($.wasm.wasmPaths=tr.substr(0,+tr.lastIndexOf("/")+1)),new Promise((n,r)=>{Me?.terminate();let e=URL.createObjectURL(new Blob([ya()],{type:"text/javascript"}));Me=new Worker(e,{name:"ort-wasm-proxy-worker"}),Me.onerror=a=>r(a),Me.onmessage=bo,URL.revokeObjectURL(e),Ur=[n,r];let u={type:"init-wasm",in:$};Me.postMessage(u)});try{await ua($.wasm),await la($),rr=!0}catch(n){throw nr=!0,n}finally{Ut=!1}}},ba=async n=>{if(Ke())return ht(),new Promise((r,e)=>{mt("init-ep",[r,e]);let u={type:"init-ep",in:{epName:n,env:$}};Me.postMessage(u)});await ca($,n)},Oa=async n=>Ke()?(ht(),new Promise((r,e)=>{mt("copy-from",[r,e]);let u={type:"copy-from",in:{buffer:n}};Me.postMessage(u,[n.buffer])})):Dt(n),va=async(n,r)=>{if(Ke()){if(r?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return ht(),new Promise((e,u)=>{mt("create",[e,u]);let a={type:"create",in:{model:n,options:{...r}}},d=[];n instanceof Uint8Array&&d.push(n.buffer),Me.postMessage(a,d)})}else return da(n,r)},_a=async n=>{if(Ke())return ht(),new Promise((r,e)=>{mt("release",[r,e]);let u={type:"release",in:n};Me.postMessage(u)});pa(n)},Ta=async(n,r,e,u,a,d)=>{if(Ke()){if(e.some(f=>f[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(a.some(f=>f))throw new Error("pre-allocated output tensor is not supported for proxy.");return ht(),new Promise((f,o)=>{mt("run",[f,o]);let m=e,h={type:"run",in:{sessionId:n,inputIndices:r,inputs:m,outputIndices:u,options:d}};Me.postMessage(h,ga(m))})}else return ma(n,r,e,u,a,d)},Ea=async n=>{if(Ke())return ht(),new Promise((r,e)=>{mt("end-profiling",[r,e]);let u={type:"end-profiling",in:n};Me.postMessage(u)});ha(n)}});var et,or,ar,kr=W(()=>{"use strict";Qe();Br();Zt();Dr();et=(n,r)=>{switch(n.location){case"cpu":return[n.type,n.dims,n.data,"cpu"];case"gpu-buffer":return[n.type,n.dims,{gpuBuffer:n.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${n.location} for ${r()}`)}},or=n=>{switch(n[3]){case"cpu":return new le(n[0],n[2],n[1]);case"gpu-buffer":{let r=n[0];if(!Qt(r))throw new Error(`not supported data type: ${r} for deserializing GPU tensor`);let{gpuBuffer:e,download:u,dispose:a}=n[2];return le.fromGpuBuffer(e,{dataType:r,dims:n[1],download:u,dispose:a})}default:throw new Error(`invalid data location: ${n[3]}`)}},ar=class{async fetchModelAndCopyToWasmMemory(r){return Oa(await xt(r))}async loadModel(r,e){He();let u;typeof r=="string"?typeof process<"u"&&process.versions&&process.versions.node?u=await xt(r):u=await this.fetchModelAndCopyToWasmMemory(r):u=r,[this.sessionId,this.inputNames,this.outputNames]=await va(u,e),We()}async dispose(){return _a(this.sessionId)}async run(r,e,u){He();let a=[],d=[];Object.entries(r).forEach(w=>{let M=w[0],C=w[1],S=this.inputNames.indexOf(M);if(S===-1)throw new Error(`invalid input '${M}'`);a.push(C),d.push(S)});let f=[],o=[];Object.entries(e).forEach(w=>{let M=w[0],C=w[1],S=this.outputNames.indexOf(M);if(S===-1)throw new Error(`invalid output '${M}'`);f.push(C),o.push(S)});let m=a.map((w,M)=>et(w,()=>`input "${this.inputNames[d[M]]}"`)),h=f.map((w,M)=>w?et(w,()=>`output "${this.outputNames[o[M]]}"`):null),g=await Ta(this.sessionId,d,m,o,h,u),b={};for(let w=0;w<g.length;w++)b[this.outputNames[o[w]]]=f[w]??or(g[w]);return We(),b}startProfiling(){}endProfiling(){Ea(this.sessionId)}}});var Oo,ir,Sa=W(()=>{"use strict";Qe();Br();kr();Oo=()=>{if((typeof $.wasm.initTimeout!="number"||$.wasm.initTimeout<0)&&($.wasm.initTimeout=0),typeof $.wasm.simd!="boolean"&&($.wasm.simd=!0),typeof $.wasm.proxy!="boolean"&&($.wasm.proxy=!1),typeof $.wasm.trace!="boolean"&&($.wasm.trace=!1),typeof $.wasm.numThreads!="number"||!Number.isInteger($.wasm.numThreads)||$.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&($.wasm.numThreads=1);let n=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;$.wasm.numThreads=Math.min(4,Math.ceil((n||1)/2))}},ir=class{async init(r){Oo(),await wa(),await ba(r)}async createInferenceSessionHandler(r,e){let u=new ar;return await u.loadModel(r,e),Promise.resolve(u)}}});var Re,be,Ma,vo,Aa,Lr,Ra,sr,Ca,Pa,Ia,xa,Da,Nr,Ua,Fa,Ba,ka=W(()=>{"use strict";Pr();Ir();Zt();er();Ze();Ct();Re="Built without training API's enabled. Use the onnxruntime-web/training import for training functionality, and make sure that all the correct artifacts are built & moved to the correct folder if using a custom build. Check https://onnxruntime.ai/docs/build/web.html for more information.",be=(n,r,e=!0)=>{e&&n!==0?q(r):!e&&n===0&&q(r)},Ma=n=>{let r=G(),[e,u]=n,a=0;try{if(r._OrtTrainingLoadCheckpoint)a=r._OrtTrainingLoadCheckpoint(e,u);else throw new Error(Re);return be(a,"Error occurred when trying to create a CheckpointState",!1),a}catch(d){throw r._OrtTrainingReleaseCheckpoint&&a!==0&&r._OrtTrainingReleaseCheckpoint(a),d}finally{r._OrtFree(n[0])}},vo=(n,r)=>{let e=G(),u=e.stackSave();try{let a=e.stackAlloc(8);if(e._OrtTrainingGetModelInputOutputCount){let d=e._OrtTrainingGetModelInputOutputCount(n,a,a+4,r);return be(d,"Can't get session input/output count."),[e.HEAP32[a/4],e.HEAP32[a/4+1]]}else throw new Error(Re)}finally{e.stackRestore(u)}},Aa=(n,r,e,u)=>{let a=[],d=G();for(let f=0;f<r;f++)if(d._OrtTrainingGetModelInputOutputName){let o=d._OrtTrainingGetModelInputOutputName(n,f,e,u);be(o,`Can't get input or output name -- is input: ${e}, index ${f}`,!1),a.push(d.UTF8ToString(o)),d._free(o)}else throw new Error(Re);return a},Lr=(n,r)=>{let e=[],u=[],[a,d]=vo(n,r);return e=Aa(n,a,!0,r),u=Aa(n,d,!1,r),[e,u]},Ra=(n,r,e,u,a)=>{let d=G(),f=0,o=0,m=[];try{if([o,m]=Jt(a),d._OrtTrainingCreateSession)f=d._OrtTrainingCreateSession(o,n,r[0],r[1],e[0],e[1],u[0],u[1]);else throw new Error(Re);return be(f,"Error occurred when trying to create a TrainingSession",!1),f}catch(h){throw d._OrtTrainingReleaseSession&&f!==0&&d._OrtTrainingReleaseSession(f),h}finally{d._free(r[0]),d._free(e[0]),d._free(u[0]),o!==0&&d._OrtReleaseSessionOptions(o),m.forEach(h=>d._free(h))}},sr=(n,r,e,u,a,d)=>{let f=r.length;for(let g=0;g<f;g++)Kt(e[g],u,a,n,d+r[g]);let o=G(),m=o.stackAlloc(f*4),h=m/4;for(let g=0;g<f;g++)o.HEAPU32[h++]=u[g];return m},Ca=(n,r,e,u)=>{let a=G(),d=[];for(let f=0;f<r;f++){let o=a.HEAPU32[n/4+f];if(o===e[f]){d.push(u[f]);continue}let m=a.stackSave(),h=a.stackAlloc(4*4),g,b=0;try{let w=a._OrtGetTensorData(o,h,h+4,h+8,h+12);be(w,`Can't access output tensor data on index ${f}.`);let M=h/4,C=a.HEAPU32[M++];b=a.HEAPU32[M++];let S=a.HEAPU32[M++],E=a.HEAPU32[M++],F=[];for(let k=0;k<E;k++)F.push(a.HEAPU32[S/4+k]);a._OrtFree(S);let L=F.reduce((k,z)=>k*z,1);if(g=Xt(C),g==="string"){let k=[],z=b/4;for(let P=0;P<L;P++){let Oe=a.HEAPU32[z++],ve=P===L-1?void 0:a.HEAPU32[z]-Oe;k.push(a.UTF8ToString(Oe,ve))}d.push([g,F,k,"cpu"])}else{let k=Pt(g),z=new k(L);new Uint8Array(z.buffer,z.byteOffset,z.byteLength).set(a.HEAPU8.subarray(b,b+z.byteLength)),d.push([g,F,z,"cpu"])}}finally{a.stackRestore(m),g==="string"&&b&&a._free(b),a._OrtReleaseTensor(o)}}return d},Pa=async n=>{let r=G();if(r._OrtTrainingLazyResetGrad){let e=r._OrtTrainingLazyResetGrad(n);be(e,"Can't call lazyResetGrad.")}else throw new Error(Re)},Ia=async(n,r,e,u,a,d)=>{let f=G(),o=r.length,m=u.length,h=0,g=[],b=[],w=[],M=[],C=f.stackSave();try{[h,g]=ct(d);let S=sr(n,r,e,b,M,0),E=sr(n,u,a,w,M,o);if(f._OrtTrainingRunTrainStep){let F=f._OrtTrainingRunTrainStep(n,S,o,E,m,h);be(F,"failed to call OrtTrainingRunTrainStep in the WebAssembly layer")}else throw new Error(Re);return Ca(E,m,w,a)}finally{f.stackRestore(C),b.forEach(S=>f._OrtReleaseTensor(S)),w.forEach(S=>f._OrtReleaseTensor(S)),M.forEach(S=>f._free(S)),h!==0&&f._OrtReleaseRunOptions(h),g.forEach(S=>f._free(S))}},xa=async(n,r)=>{let e=G(),u=0,a=[];try{if([u,a]=ct(r),e._OrtTrainingOptimizerStep){let d=e._OrtTrainingOptimizerStep(n,u);be(d,"Failed to call OrtTrainingOptimizerStep in the WebAssembly layer")}else throw new Error(Re)}finally{u!==0&&e._OrtReleaseRunOptions(u),a.forEach(d=>e._free(d))}},Da=async(n,r,e,u,a,d)=>{let f=G(),o=r.length,m=u.length,h=0,g=[],b=[],w=[],M=[],C=f.stackSave();try{[h,g]=ct(d);let S=sr(n,r,e,b,M,0),E=sr(n,u,a,w,M,o);if(f._OrtTrainingEvalStep){let F=f._OrtTrainingEvalStep(n,S,o,E,m,h);be(F,"failed to call OrtTrainingEvalStep in the WebAssembly layer")}else throw new Error(Re);return Ca(E,m,w,a)}finally{f.stackRestore(C),b.forEach(S=>f._OrtReleaseTensor(S)),w.forEach(S=>f._OrtReleaseTensor(S)),M.forEach(S=>f._free(S)),h!==0&&f._OrtReleaseRunOptions(h),g.forEach(S=>f._free(S))}},Nr=(n,r)=>{let e=G(),u=e.stackSave();try{let a=e.stackAlloc(4);if(e._OrtTrainingGetParametersSize){let d=e._OrtTrainingGetParametersSize(n,a,r);return be(d,"Can't get parameters size"),e.HEAP32[a/4]}else throw new Error(Re)}finally{e.stackRestore(u)}},Ua=async(n,r)=>{let e=G(),u=e.stackSave(),a="float32",d="cpu",f=Nr(n,r),o=0,m=4*f,h=e._malloc(m),g=[f],b=e.stackAlloc(4),w=b/4;e.HEAP32[w]=f;try{if(o=e._OrtCreateTensor(dt(a),h,m,b,g.length,It(d)),be(o,`Can't create tensor for getContiguousParameters. session=${n}.`,!1),e._OrtTrainingCopyParametersToBuffer){let E=e._OrtTrainingCopyParametersToBuffer(n,o,f,r);be(E,"Can't get contiguous parameters.")}else throw new Error(Re);let M=Pt(a),C=new M(f),S=[];if(new Uint8Array(C.buffer,C.byteOffset,C.byteLength).set(e.HEAPU8.subarray(h,h+m)),S.push([a,g,C,d]),S.length!==1)throw new Error(`something unexpected happened in the getContiguousParameters function. Expected output length of
     one, got ${S.length}`);return S[0]}finally{o!==0&&e._OrtReleaseTensor(o),e._free(h),e._free(b),e.stackRestore(u)}},Fa=async(n,r,e)=>{let u=G(),a=u.stackSave(),d="float32",f="cpu",o=r.length,m=o/4,h=u._malloc(o);u.HEAPU8.set(r,h);let g=u.stackAlloc(4);u.HEAP32[g/4]=m;let b=1,w=0;try{if(w=u._OrtCreateTensor(dt(d),h,o,g,b,It(f)),be(w,`Can't create tensor for input/output. session=${n}`,!1),u._OrtTrainingCopyParametersFromBuffer){let M=u._OrtTrainingCopyParametersFromBuffer(n,w,m,e);be(M,"Can't copy buffer to parameters.")}else throw new Error(Re)}finally{w!==0&&u._OrtReleaseTensor(w),u.stackRestore(a),u._free(h),u._free(g)}},Ba=(n,r)=>{let e=G();e._OrtTrainingReleaseSession&&e._OrtTrainingReleaseSession(r),e._OrtTrainingReleaseCheckpoint&&e._OrtTrainingReleaseCheckpoint(n)}});var ur,La=W(()=>{"use strict";kr();er();ka();ur=class{constructor(){this.evalInputNames=[];this.evalOutputNames=[]}async uriOrBufferToHeap(r){let e;if(typeof r=="string"){let a=await(await fetch(r)).arrayBuffer();e=new Uint8Array(a)}else e=r;return Dt(e)}async createTrainingSession(r,e,u,a,d){let f=await this.uriOrBufferToHeap(r),o=await this.uriOrBufferToHeap(e),m=[0,0],h=[0,0];u!==""&&(m=await this.uriOrBufferToHeap(u)),a!==""&&(h=await this.uriOrBufferToHeap(a)),this.checkpointId=Ma(f),this.sessionId=Ra(this.checkpointId,o,m,h,d),[this.inputNames,this.outputNames]=Lr(this.sessionId,!1),u!==""&&([this.evalInputNames,this.evalOutputNames]=Lr(this.sessionId,!0))}convertMapIntoValuesArrayAndIndicesArray(r,e,u){let a=[],d=[];Object.entries(r).forEach(o=>{let m=o[0],h=o[1],g=e.indexOf(m);if(g===-1)throw new Error(`invalid input '${m}`);a.push(h),d.push(g)});let f=a.map(u);return[a,d,f]}convertTensorMetadataToReturnType(r,e,u){let a={};for(let d=0;d<r.length;d++)a[this.outputNames[u[d]]]=e[d]??or(r[d]);return a}async lazyResetGrad(){await Pa(this.sessionId)}async runTrainStep(r,e,u){let[,a,d]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.inputNames,(g,b)=>et(g,()=>`input "${this.inputNames[a[b]]}"`)),[f,o,m]=this.convertMapIntoValuesArrayAndIndicesArray(e,this.outputNames,(g,b)=>g?et(g,()=>`output "${this.outputNames[o[b]]}"`):null),h=await Ia(this.sessionId,a,d,o,m,u);return this.convertTensorMetadataToReturnType(h,f,o)}async runOptimizerStep(r){await xa(this.sessionId,r)}async runEvalStep(r,e,u){let[,a,d]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.evalInputNames,(g,b)=>et(g,()=>`input "${this.evalInputNames[a[b]]}"`)),[f,o,m]=this.convertMapIntoValuesArrayAndIndicesArray(e,this.evalOutputNames,(g,b)=>g?et(g,()=>`output "${this.evalOutputNames[o[b]]}"`):null),h=await Da(this.sessionId,a,d,o,m,u);return this.convertTensorMetadataToReturnType(h,f,o)}async getParametersSize(r){return Nr(this.sessionId,r)}async loadParametersBuffer(r,e){await Fa(this.sessionId,r,e)}async getContiguousParameters(r){let e=await Ua(this.sessionId,r);return or(e)}async dispose(){return Ba(this.checkpointId,this.sessionId)}}});var Na={};ft(Na,{wasmBackend:()=>_o});var Hr,_o,Ha=W(()=>{"use strict";Sa();La();Hr=class extends ir{async createTrainingSessionHandler(r,e,u,a,d){let f=new ur;return await f.createTrainingSession(r,e,u,a,d),Promise.resolve(f)}},_o=new Hr});var Eo={};ft(Eo,{InferenceSession:()=>Ln,TRACE:()=>Fn,TRACE_FUNC_BEGIN:()=>He,TRACE_FUNC_END:()=>We,Tensor:()=>le,TrainingSession:()=>$n,default:()=>To,env:()=>$,registerBackend:()=>lt});Qe();Qe();Qe();var Vn="1.18.0";var To=vr;{let n=(Ha(),qe(Na)).wasmBackend;lt("cpu",n,10),lt("wasm",n,10)}Object.defineProperty($.versions,"web",{value:Vn,enumerable:!0});return qe(Eo);})();
//# sourceMappingURL=ort.training.wasm.min.js.map
